<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Wednesday, September 10, 2014, 11:23 a.m. -->
<!-- MuClient version 4.84 -->

<!-- Plugin "Sharptracker" generated by Plugin Wizard -->

<!--
beta release, it's been a while, changes never recorded and why, my bad..
-->

<muclient>
<plugin
   name="Sharptracker"
   author="Opochtli"
   id="1d2453fc52dacb072cab2d78"
   language="Lua"
   purpose="Character Development Tracker for Aaardwolf MUD"
   save_state="y"
   date_written="2014-09-10 11:14:08"
   requires="4.70"
   version="1.0"
   >
<description trim="y">
<![CDATA[
Created so other players can include into thier own scripts the simple LUA language.

All triggering based on text received from the MUD

Feel free to change anything.
]]>
</description>

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Triggers  -->

<triggers>
  <trigger
   enabled="y"
   group="strack_global"
   match="Global Quest: The global quest has been won by*"
   send_to="12"
   sequence="100"
   other_back_colour="gold"
  >
  <send>if (GetVariable "st_toggle_display_global") == "1" then
  SetVariable ("st_toggle_display_global", 0)
end

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_assassin"
   match="*You assassinate * with cold efficiency."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>SetVariable ("st_skills_assassin", (GetVariable "st_skills_assassin") + 1)
SetVariable ("st_skills_assassintotal", (GetVariable "st_skills_assassintotal") + 1)

SetVariable ("skill_assassin", 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_weapon_damage"
   make_underline="y"
   match="You counter-strike *"
   send_to="12"
   sequence="100"
   other_text_colour="white"
  >
  <send>SetVariable ("weapon_damage_counter", (GetVariable "weapon_damage_counter") + 1)
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_dodges"
   match="You create a time shift*"
   omit_from_log="y"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_dodges_time", (GetVariable "st_dodges_time") + 1)</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_dodges"
   match="You dodge*"
   omit_from_log="y"
   omit_from_output="y"
   send_to="12"
   sequence="100"
   other_text_colour="deepskyblue"
  >
  <send>SetVariable ("st_dodges_dodge", (GetVariable "st_dodges_dodge") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_pups_active"
   match="You gain * trains."
   omit_from_log="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_counter_puptrains", "%1")
SetVariable ("st_counter_puptrainssession", (GetVariable "st_counter_puptrainssession") + "%1")
SetVariable ("st_counter_puptrainstotal", (GetVariable "st_counter_puptrainstotal") + "%1")
SetVariable ("st_counter_puptrainsdouble", (GetVariable "st_counter_puptrainsdouble") + "%1")
SetVariable ("st_counter_puptrainshour", (GetVariable "st_counter_puptrainshour") + "%1")
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_dodges"
   match="You get lucky and manage to escape*"
   omit_from_log="y"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_dodges_luck", (GetVariable "st_dodges_luck") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Slash *"
   send_to="12"
   sequence="103"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Slash"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_wealth_active"
   match="*Quest points : [*]*"
   send_to="12"
   sequence="104"
  >
  <send>x = (string.gsub("%2", ",", ""))

if tonumber(x) then
  SetVariable ("st_wealth_qps", tonumber(x))
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Acid *"
   send_to="12"
   sequence="104"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Acid"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_attrib_active"
   match="Trains: [*]  Pracs: [*]  Saves: [*]"
   omit_from_log="y"
   send_to="12"
   sequence="104"
  >
  <send>SetVariable ("str_attrib_saves", tonumber("%3"))
</send>
  </trigger>
  <trigger
   custom_colour="9"
   enabled="y"
   group="strack_double"
   match="INFO: Bonus experience has now expired."
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_toggle_display_double", 0)
SetVariable ("st_counter_double", (GetVariable "st_counter_double") + 1)
SetVariable ("st_counter_doublestotal", (GetVariable "st_counter_doublestotal") + 1)

if (GetVariable "st_counter_mobkilldouble") &gt; "0" then

  time_duration = math.abs(os.difftime ((GetVariable "st_time_double"), os.time ()))
  time_hh = (math.floor(math.abs(time_duration/3600)))
  time_mm = (math.floor(math.abs(time_duration/60))-(time_hh*60))
  time_ss = time_duration-(time_hh*3600)
  time_ss = time_ss-(time_mm*60)
  time_result = time_hh .."hr" .. time_mm .. "mins" .. time_ss .. "secs"

  tempstorage = " :double summary #" .. (GetVariable "st_counter_double") .. " "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Mobs"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_mobkilldouble")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. math.ceil(((GetVariable "st_counter_mobkilldouble")/((time_hh*60) + time_mm)*100))/100
  tempstorage = tempstorage .. "min"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Exp"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_mobexpdouble")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. math.ceil(((GetVariable "st_counter_mobexpdouble")/((time_hh*60) + time_mm)*100))/100
  tempstorage = tempstorage .. "min"
  if (GetVariable "st_counter_mobexpdouble") &gt; "0" then
    xy = (GetVariable "st_counter_mobexpdouble")/(GetVariable "st_counter_mobkilldouble")
    xy = (math.ceil(xy*100)/100)
    tempstorage = tempstorage .. " " .. xy .. "mob"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Gold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_mobgolddouble")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. commas (math.ceil(((GetVariable "st_counter_mobgolddouble")/((time_hh*60) + time_mm)*100))/100)
  tempstorage = tempstorage .. "min"
  if (GetVariable "st_counter_mobkilldouble") &gt; "0" then
    xy = (GetVariable "st_counter_mobgolddouble")/(GetVariable "st_counter_mobkilldouble")
    xy = commas (math.ceil(xy*100)/100)
    tempstorage = tempstorage .. " " .. xy .. "mob"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"

  if (GetVariable "st_counter_pupdouble") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. " Pups"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_pupdouble")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (GetVariable "st_counter_puptrainsdouble") .. "trains"

  if (GetVariable "st_counter_pupstatsdouble") &gt; "0" then
    tempstorage = tempstorage .. " "
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_pupstatsdouble")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "stats"
  end

    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ")"
  end

  if (GetVariable "st_counter_leveldouble") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. " Levels"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_levelhour")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ")"
  end

  SetVariable ("st_last_double", tempstorage)

  if (GetVariable "st_send_all") == "1" then
    if (GetVariable "st_toggle_double") == "1" then
      SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_double"))
    end
  end

  Execute("strack_display")
end</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_quest"
   match="is in the general area of *."
   send_to="12"
   sequence="104"
  >
  <send>SetVariable ("st_quest_area", "%1")
SetVariable ("st_time_quest", os.time ())

  tempstorage = " :"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "quest"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_quest_from")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Mob"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_quest_mob")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Room"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_quest_room")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Area"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_quest_area")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

SetVariable ("st_quest_task", tempstorage)

SetStatus("Quest(" .. (GetVariable "st_quest_mob") ..") Room(" .. (GetVariable "st_quest_room") ..") Area(" .. (GetVariable "st_quest_area") ..")")

if (GetVariable "st_send_all") == "1" then
  if (GetVariable "st_toggle_quest_report") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_quest_task"))
  end
end</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_player"
   match="Level * * * * (Tier *)."
   omit_from_log="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_player_level", "%1")
SetVariable ("st_player_gender", "%2")
SetVariable ("st_player_race", "%3")
SetVariable ("st_player_class", "%4")
SetVariable ("st_player_tier", "%5")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_misc"
   match="*You carefully carve yourself a trophy from *"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_counter_trophy", (GetVariable "st_counter_trophy") + 1)
SetVariable ("st_counter_trophytotal", (GetVariable "st_counter_trophytotal") + 1)
-- Send("cast conceal trophy")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_global"
   match="No global quest running right now."
   omit_from_log="y"
   send_to="12"
   sequence="100"
   other_back_colour="gold"
  >
  <send>SetVariable ("st_toggle_display_global", 0)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_player"
   match="Remort: *"
   omit_from_log="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_player_remort", "%1")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_quest"
   match="*You do not have to wait to go on another quest."
   send_to="12"
   sequence="100"
   other_text_colour="orange"
  >
  <send>SetVariable ("st_toggle_display_quest", 1)
InfoBackground ("red")

if GetVariable ("st_toggle_display_quest") == "1" then
  SendNoEcho(GetVariable "st_send_results" .. " :can now quest")
end

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_attrib_active"
   match="Str :[*/*]  Int :[*/*]  Wis :[*/*]  Hr :[*]"
   omit_from_log="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("str_attrib_str_total", tonumber("%1"))
SetVariable ("str_attrib_str_base", tonumber("%2"))
SetVariable ("str_attrib_int_total", tonumber("%3"))
SetVariable ("str_attrib_int_base", tonumber("%4"))
SetVariable ("str_attrib_wis_total", tonumber("%5"))
SetVariable ("str_attrib_wis_base", tonumber("%6"))
SetVariable ("str_attrib_hr", tonumber("%7"))</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_global"
   match="You have now joined the quest. See 'help gquest' for available commands."
   send_to="12"
   sequence="100"
   other_back_colour="gold"
  >
  <send>SetVariable ("st_toggle_display_global", 1)
SetVariable ("st_counter_globalsession", (GetVariable "st_counter_globalsession") + 1)
SetVariable ("st_counter_globaltotal", (GetVariable "st_counter_globaltotal") + 1)

Execute("strack_display")
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_trivia"
   match="You killed a Trivia Point bonus mob!! Trivia point added*"
   omit_from_log="y"
   send_to="12"
   sequence="100"
   other_text_colour="white"
   other_back_colour="purple"
  >
  <send>SetVariable ("st_counter_triviamob", (GetVariable "st_counter_triviamob") + 1)
SetVariable ("st_counter_triviasession", (GetVariable "st_counter_triviasession") + 1)

tempstorage = " :Trivia Mob "
tempstorage = tempstorage .. (GetVariable "st_counter_triviasession")
tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
tempstorage = tempstorage .. ": "
tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
tempstorage = tempstorage .. (GetVariable "st_last_kill")

SetVariable ("st_last_trivia", tempstorage)

if (GetVariable "st_send_all") == "1" then
  if (GetVariable "st_toggle_trivia_report") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_trivia"))
  else
    ColourNote ("black", "white", " Trivia Mob Reports ", "white", "black", " OFF")
  end
end
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_trivia"
   match="You killed a Trivia bonus mob!! Trivia point added*"
   omit_from_log="y"
   send_to="12"
   sequence="100"
   other_text_colour="white"
   other_back_colour="purple"
  >
  <send>SetVariable ("st_counter_triviamob", (GetVariable "st_counter_triviamob") + 1)
SetVariable ("st_counter_triviasession", (GetVariable "st_counter_triviasession") + 1)

tempstorage = " :Trivia Mob "
tempstorage = tempstorage .. (GetVariable "st_counter_triviasession")
tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
tempstorage = tempstorage .. ": "
tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
tempstorage = tempstorage .. (GetVariable "st_last_kill")

SetVariable ("st_last_trivia", tempstorage)

if (GetVariable "st_send_all") == "1" then
  if (GetVariable "st_toggle_trivia_report") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_trivia"))
  else
    ColourNote ("black", "white", " Trivia Mob Reports ", "white", "black", " OFF")
  end
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_dodges"
   match="You misdirect*"
   omit_from_log="y"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_dodges_misdirect", (GetVariable "st_dodges_misdirect") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_attrib_active"
   match="*(Use 'SCORE' and 'WHOIS' to see more details on your character)*"
   omit_from_log="y"
   omit_from_output="y"
   send_to="12"
   sequence="105"
  >
  <send>gag=0</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_wealth_active"
   match="*Hit * : [*/*]*"
   send_to="12"
   sequence="105"
  >
  <send>x = (string.gsub("%4", ",", ""))

if tonumber(x) then
  SetVariable ("st_wealth_hps", tonumber(x))
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_skills"
   match="*You have now completely mastered *!"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_skills_mastered", (GetVariable "st_skills_mastered") + 1)
SetVariable ("st_counter_masteredtotal", (GetVariable "st_counter_masteredtotal") + 1)

  tempstorage = " :mastered #"
  tempstorage = tempstorage .. (GetVariable "st_skills_mastered") .. " "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "skill/spell"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "%2"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

if (GetVariable "st_send_all") == "1" then
  if (GetVariable "st_toggle_skills_mastered") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. tempstorage)
  end
end</send>
  </trigger>
  <trigger
   group="strack_quest_temp"
   match="*tells you 'You have * minutes to complete your quest.'"
   send_to="12"
   sequence="105"
  >
  <send>SetVariable ("st_time_quest", os.time ())
SetVariable ("st_quest_time", "%2")

-- Construct Status Bar
  tempstorage = " "
  tempstorage = tempstorage .. "Questor(" ..(GetVariable "st_quest_from") .. ")"
  tempstorage = tempstorage .. "Mob(" ..(GetVariable "st_quest_mob") .. ")"
  tempstorage = tempstorage .. " Room(" ..(GetVariable "st_quest_room") .. ")"
  tempstorage = tempstorage .. " Area(" ..(GetVariable "st_quest_area") .. ")"
  SetVariable ("st_quest_task", tempstorage)
  SetStatus(GetVariable "st_quest_task")

-- Construct Display
  tempstorage = " :"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Questor"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "st_quest_from")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Mob"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "st_quest_mob")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Room"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "st_quest_room")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Area"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "st_quest_area")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

SetVariable ("st_quest_task", tempstorage)

if (GetVariable "st_send_all") == "1" then
  if (GetVariable "st_toggle_quest_report") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_quest_task"))
  end
end
</send>
  </trigger>
  <trigger
   enabled="y"
   group="strack_gag"
   match="*You have set your character to receive no experience points!"
   omit_from_log="y"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>gag=0</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Air *"
   send_to="12"
   sequence="105"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Air"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_stealth"
   match="*You hide in the shadows, stalking the room."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>SetVariable ("st_skills_stealth", (GetVariable "st_skills_stealth") + 1)
SetVariable ("st_skills_stealthtotal", (GetVariable "st_skills_stealthtotal") + 1)

SetVariable ("skill_stealth", 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_attrib_active"
   match="*(Use 'RESISTS' to see your resistances.)*"
   omit_from_log="y"
   send_to="12"
   sequence="106"
  >
  <send>EnableGroup ("strack_attrib_active", false)

  tempstorage = (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Level "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_level_player")
  tempstorage = tempstorage .. " T" .. (GetVariable "st_player_tier")
  tempstorage = tempstorage .. " " .. (GetVariable "st_player_gender")
  tempstorage = tempstorage .. " " .. (GetVariable "st_player_race")
  tempstorage = tempstorage .. " " .. (GetVariable "st_player_class")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. " :"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " " .. (GetVariable "st_player_remort")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " Str"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "str_attrib_str_total")
  tempstorage = tempstorage .. "/"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "str_attrib_str_base")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " Int"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "str_attrib_int_total")
  tempstorage = tempstorage .. "/"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "str_attrib_int_base")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " Wis"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "str_attrib_wis_total")
  tempstorage = tempstorage .. "/"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "str_attrib_wis_base")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " Dex"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "str_attrib_dex_total")
  tempstorage = tempstorage .. "/"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "str_attrib_dex_base")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " Con"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "str_attrib_con_total")
  tempstorage = tempstorage .. "/"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "str_attrib_con_base")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " Luck"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "str_attrib_luck_total")
  tempstorage = tempstorage .. "/"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "str_attrib_luck_base")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. " :"

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Fortitude"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "str_attrib_hr")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "hr "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "str_attrib_dr")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "dr "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "str_attrib_saves")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "saves"

if tonumber(GetVariable "str_attrib_hp_base") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " " .. commas (GetVariable "str_attrib_hp_base")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "hps"
end

if tonumber(GetVariable "str_attrib_mn_base") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " " .. commas (GetVariable "str_attrib_mn_base")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "mana"
end

if tonumber(GetVariable "str_attrib_mv_base") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " " .. commas (GetVariable "str_attrib_mv_base")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "moves"
end

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"

  tempstorage = " :attribs " .. tempstorage


SetVariable ("str_attrib_report", tempstorage)
</send>
  </trigger>
  <trigger
   enabled="y"
   group="strack_reset"
   match="Welcome to Aardwolf. May your adventures be mystical, challenging and rewarding."
   send_to="12"
   sequence="100"
  >
  <send>Note("Initiating New Session")
Execute("st_initiate")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_misc"
   match="*You make yourself * skinned from *"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_counter_skin", (GetVariable "st_counter_skin") + 1)
SetVariable ("st_counter_skintotal", (GetVariable "st_counter_skintotal") + 1)
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_entrap"
   match="You PK trap the room."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>SetVariable ("st_skills_entrap", (GetVariable "st_skills_entrap") + 1)
SetVariable ("st_skills_entraptotal", (GetVariable "st_skills_entraptotal") + 1)

SetVariable ("skill_entrap", 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="9"
   enabled="y"
   group="strack_balor"
   match="*You may now use Balor Spittle abilities."
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("skill_balor", 0)
SetVariable ("skill_poison_balor_toggle", 0)
Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_global"
   match="You are not on a global quest*"
   omit_from_log="y"
   send_to="12"
   sequence="100"
   other_back_colour="gold"
  >
  <send>SetVariable ("st_toggle_display_global", 0)

Execute("strack_display")</send>
  </trigger>
  <trigger
   enabled="y"
   group="strack_stealth"
   match="*You fail to become stealthy."
   send_to="12"
   sequence="100"
  >
  <send>Send("stealth")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_suppress"
   match="You are still recovering your Suppression abilitie*"
   omit_from_log="y"
   send_to="12"
   sequence="100"
   other_back_colour="yellowgreen"
  >
  <send>SetVariable ("skill_suppress", 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_dodges"
   match="You parry*"
   omit_from_log="y"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_dodges_parry", (GetVariable "st_dodges_parry") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You receive (halved) *+* experience points."
   send_to="12"
   sequence="100"
  >
  <send>x = "%1"
y = "%2"
xy = tonumber(x) + tonumber(y)

if xy then
  SetVariable ("st_counter_mobexptotal", (GetVariable "st_counter_mobexptotal") + xy)
  SetVariable ("st_counter_mobexpsession", (GetVariable "st_counter_mobexpsession") + xy)
  SetVariable ("st_counter_mobexphour", (GetVariable "st_counter_mobexphour") + xy)
  SetVariable ("st_counter_mobexpdouble", (GetVariable "st_counter_mobexpdouble") + xy)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="^You receive (\d+)(\+\d+)?(\+\d+)?(\+\d+)? experience points.$"
   regexp="y"
   send_to="12"
   script="POSCode"
   sequence="100"
  >
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You receive 1 experience point."
   send_to="12"
   sequence="100"
  >
  <send>x = "%1"

if tonumber(x) then
  SetVariable ("st_counter_mobexptotal", (GetVariable "st_counter_mobexptotal") + x)
  SetVariable ("st_counter_mobexpsession", (GetVariable "st_counter_mobexpsession") + x)
  SetVariable ("st_counter_mobexphour", (GetVariable "st_counter_mobexphour") + x)
  SetVariable ("st_counter_mobexpdouble", (GetVariable "st_counter_mobexpdouble") + x)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_dodges"
   match="You blink*"
   name="st_dodges_blink"
   omit_from_log="y"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_dodges_blink", (GetVariable "st_dodges_blink") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_wealth_active"
   match="*Mana * : [*/*]*"
   send_to="12"
   sequence="106"
  >
  <send>x = (string.gsub("%4", ",", ""))

if tonumber(x) then
  SetVariable ("st_wealth_mana", tonumber(x))
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_wealth_active"
   match="*Moves * : [*/*]*"
   send_to="12"
   sequence="106"
  >
  <send>x = (string.gsub("%4", ",", ""))

if tonumber(x) then
  SetVariable ("st_wealth_moves", tonumber(x))
end
</send>
  </trigger>
  <trigger
   custom_colour="9"
   enabled="y"
   group="strack_necro"
   match="*You may now use advanced poisons."
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("skill_poison_necrotic_toggle", 0)

SetVariable ("skill_necrotic", 0)
Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_quest"
   match="*Return to the questmaster before your time runs out."
   send_to="12"
   sequence="106"
   other_text_colour="orange"
  >
  <send>SetVariable ("st_toggle_quest", 1)
EnableGroup ("strack_quest_active", true)
InfoBackground ("orange")

SetStatus("Return to the questmaster before your time runs out")
Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_stealth"
   match="*You may now use stealth abilities."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>SetVariable ("skill_stealth", 0)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_equip_active"
   match="*Totals may not balance due to max stats and max bonus."
   send_to="12"
   sequence="106"
  >
  <send>EnableGroup ("strack_equip_active", false)
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_suppress"
   match="*You may now use suppression abilities."
   omit_from_log="y"
   send_to="12"
   sequence="100"
   other_back_colour="yellowgreen"
  >
  <send>SetVariable ("skill_suppress", 0)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Cold *"
   send_to="12"
   sequence="106"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Cold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Light *"
   send_to="12"
   sequence="112"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Light"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_skills"
   match="*You have become better at *! (*%)"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_skills_improved", (GetVariable "st_skills_improved") + 1)
SetVariable ("st_counter_improvedtotal", (GetVariable "st_counter_improvedtotal") + 1)

  tempstorage = " :improvement #"
  tempstorage = tempstorage .. (GetVariable "st_skills_improved") .. " "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "skill/spell"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "%2"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "progress"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "%3" .. "%"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"

if (GetVariable "st_send_all") == "1" then
  if (GetVariable "st_toggle_skills_improved") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. tempstorage)
  end
end</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Electric *"
   send_to="12"
   sequence="113"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Electric"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Magic *"
   send_to="12"
   sequence="114"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Magic"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_dodges"
   match="You sense divine intervention*"
   omit_from_log="y"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_dodges_divine", (GetVariable "st_dodges_divine") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Mental *"
   send_to="12"
   sequence="115"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Mental"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Negative *"
   send_to="12"
   sequence="116"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Negative"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_weapon_damage"
   match="Your * glows brightly and almost decapitates *."
   send_to="12"
   sequence="100"
   other_back_colour="gold"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_session"), os.time ()))

time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs((time_duration/3600)-(time_dd*24))))
time_mm = (math.floor(math.abs((time_duration/60)-(time_dd*1440)-(time_hh*60))))
time_mmfull = (math.floor(math.abs((time_duration/60))))
time_ss = time_duration-(time_mmfull*60)

time_result = (GetVariable "st_send_colour_effect")
time_result = time_result .. "("

if time_duration &gt; (60*60*24) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_dd
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "days "
end

if time_duration &gt; (60*60) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_hh
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "hrs "
end

if time_duration &gt; 60 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "mins "
end
  
if time_duration &gt; 0 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "secs"
end

time_result = time_result .. (GetVariable "st_send_colour_effect")
time_result = time_result .. ")"

SetVariable ("st_counter_vorpalstotal", (GetVariable "st_counter_vorpalstotal") + 1)
SetVariable ("st_counter_vorpalsession", (GetVariable "st_counter_vorpalsession") + 1)

tempstorage = " :vorpal "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_vorpalsession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "session "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_vorpalstotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "total "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
--  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "After"
  tempstorage = tempstorage .. time_result
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " and "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_mobkillsession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "mobkills"

tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")

tempstorage = tempstorage .. ":"
tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
tempstorage = tempstorage .. " %2"

SetVariable ("st_last_vorpalsession", tempstorage)
if (GetVariable "st_send_all") == "1" then
  if (GetVariable "st_toggle_vorpal_report") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_vorpalsession"))
  end
end
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_suppress"
   match="Your dark magic causes * to feel sluggish."
   omit_from_log="y"
   send_to="12"
   sequence="100"
   other_back_colour="yellowgreen"
  >
  <send>SetVariable ("st_skills_suppress", (GetVariable "st_skills_suppress") + 1)
SetVariable ("st_skills_suppresstotal", (GetVariable "st_skills_suppresstotal") + 1)

SetVariable ("skill_suppress", 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_quest_active"
   match="*You get lucky and gain an extra * quest points."
   send_to="12"
   sequence="107"
   other_text_colour="orange"
  >
  <send>SetVariable ("st_quest_reward_qpoint2", "%2")

x = "%2"
if tonumber(x) then
  SetVariable ("st_quest_reward_qpointtotal", (GetVariable "st_quest_reward_qpointtotal") + x)
  SetVariable ("st_quest_reward_qpointtotalall", (GetVariable "st_quest_reward_qpointtotalall") + x)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_quest_active"
   match="*tells you 'As a reward, I am giving you * quest points and * gold.'"
   send_to="12"
   sequence="107"
   other_text_colour="orange"
  >
  <send>SetVariable ("st_quest_reward_qpoint1", "%2")
SetVariable ("st_quest_reward_gold1", "%3")

x = "%2"
if tonumber(x) then
  SetVariable ("st_quest_reward_qpointtotal", (GetVariable "st_quest_reward_qpointtotal") + x)
  SetVariable ("st_quest_reward_qpointtotalall", (GetVariable "st_quest_reward_qpointtotalall") + x)
end

x = (string.gsub("%3", ",", ""))
if tonumber(x) then
  SetVariable ("st_counter_mobgoldtotal", (GetVariable "st_counter_mobgoldtotal") + x)
  SetVariable ("st_counter_mobgoldsession", (GetVariable "st_counter_mobgoldsession") + x)
  SetVariable ("st_counter_mobgoldhour", (GetVariable "st_counter_mobgoldhour") + x)
  SetVariable ("st_counter_mobgolddouble", (GetVariable "st_counter_mobgolddouble") + x)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_quest_active"
   match="*tells you 'I am also giving you a * quest point* tier bonus*"
   send_to="12"
   sequence="107"
  >
  <send>SetVariable ("st_quest_reward_qpoint3", "%2")

x = "%2"
if tonumber(x) then
  SetVariable ("st_quest_reward_qpointtotal", (GetVariable "st_quest_reward_qpointtotal") + x)
  SetVariable ("st_quest_reward_qpointtotalall", (GetVariable "st_quest_reward_qpointtotalall") + x)
end

</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_stealth"
   match="*You no longer feel stealthy."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>stealth=1</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_quest"
   match="*There are * remaining until you can go on another quest."
   send_to="12"
   sequence="99"
  >
  <send>SetVariable ("st_toggle_quest", 0)
InfoBackground ("white")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Disease *"
   send_to="12"
   sequence="107"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Disease"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_entrap"
   match="## You may now use trapping abilities."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>SetVariable ("skill_entrap", 0)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_wealth_active"
   match="Gold in the bank * : * *"
   send_to="12"
   sequence="107"
  >
  <send>x = (string.gsub("%3", ",", ""))

if tonumber(x) then
  SetVariable ("st_wealth_gold", tonumber(x))
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_level"
   match="*You raise a level! You are now level *."
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_level_player", "%2")
SetVariable ("st_player_level", "%2")
SetVariable ("st_counter_levelsession", (GetVariable "st_counter_levelsession") + 1)
SetVariable ("st_counter_leveltotal", (GetVariable "st_counter_leveltotal") + 1)
SetVariable ("st_counter_levelhour", (GetVariable "st_counter_levelhour") + 1)
SetVariable ("st_counter_leveldouble", (GetVariable "st_counter_leveldouble") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_player"
   match="* Player : * (*"
   omit_from_log="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_player_name", "%2")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_necro"
   match="*You reach out and touch * but your poison fails to take hold."
   send_to="12"
   sequence="100"
   other_text_colour="yellow"
   other_back_colour="darkgreen"
  >
  <send>SetVariable ("skill_poison_necrotic_toggle", 1)
SetVariable ("skill_necro", 1)
Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_weapon_damage"
   make_underline="y"
   match="* drains life from *"
   send_to="12"
   sequence="100"
   other_text_colour="salmon"
  >
  <send>SetVariable ("weapon_damage_vamperic", GetVariable ("weapon_damage_vamperic") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Poison *"
   send_to="12"
   sequence="117"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Poison"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_weapon_damage"
   make_underline="y"
   match="* eyes are seared by *"
   send_to="12"
   sequence="100"
   other_text_colour="yellow"
  >
  <send>SetVariable ("weapon_damage_flaming", GetVariable ("weapon_damage_flaming") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Shadow *"
   send_to="12"
   sequence="118"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Shadow"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Sonic *"
   send_to="12"
   sequence="119"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Sonic"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_weapon_damage"
   match="Your death blow CLEAVES * in two!"
   send_to="12"
   sequence="100"
   other_back_colour="sandybrown"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_session"), os.time ()))

time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs((time_duration/3600)-(time_dd*24))))
time_mm = (math.floor(math.abs((time_duration/60)-(time_dd*1440)-(time_hh*60))))
time_mmfull = (math.floor(math.abs((time_duration/60))))
time_ss = time_duration-(time_mmfull*60)

time_result = (GetVariable "st_send_colour_effect")
time_result = time_result .. "("

if time_duration &gt; (60*60*24) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_dd
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "days "
end

if time_duration &gt; (60*60) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_hh
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "hrs "
end

if time_duration &gt; 60 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "mins "
end
  
if time_duration &gt; 0 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "secs"
end

time_result = time_result .. (GetVariable "st_send_colour_effect")
time_result = time_result .. ")"

SetVariable ("st_skills_deathblow", (GetVariable "st_skills_deathblow") + 1)
SetVariable ("st_skills_deathblowtotal", (GetVariable "st_skills_deathblowtotal") + 1)

tempstorage = " :deathblow "
tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
tempstorage = tempstorage .. "#"
tempstorage = tempstorage .. (GetVariable "st_skills_deathblow")
tempstorage = tempstorage .. " "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
--  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "After"
  tempstorage = tempstorage .. time_result
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " and "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_mobkillsession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "mobkills"

tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")

tempstorage = tempstorage .. ":"
tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
tempstorage = tempstorage .. " %1"

SetVariable ("st_last_deathblow", tempstorage)
if (GetVariable "st_send_all") == "1" then
  if (GetVariable "st_toggle_deathblow_report") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_deathblow"))
  end
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_wealth_active"
   match="*Type 'resists' for detailed resistance stats."
   send_to="12"
   sequence="120"
  >
  <send>EnableGroup ("strack_wealth_active", false)

  tempstorage = (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Level "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_level_player")
  tempstorage = tempstorage .. " T" .. (GetVariable "st_player_tier")
  tempstorage = tempstorage .. " " .. (GetVariable "st_player_gender")
  tempstorage = tempstorage .. " " .. (GetVariable "st_player_race")
  tempstorage = tempstorage .. " " .. (GetVariable "st_player_class")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. " :"

if((GetVariable "st_wealth_gold") + (GetVariable "st_wealth_hand"))&gt;0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " Gold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_wealth_gold")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Bank"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " "
  tempstorage = tempstorage .. commas (GetVariable "st_wealth_hand")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Hand"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

--[[
if tonumber(GetVariable "st_wealth_gold") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " Gold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_wealth_gold")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Bank"
  if tonumber(GetVariable "st_wealth_hand") &gt; 0 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. " "
    tempstorage = tempstorage .. commas (GetVariable "st_wealth_hand")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "Hand"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end
--]]

if tonumber(GetVariable "st_wealth_qps") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " Quest Points"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_wealth_qps")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if tonumber(GetVariable "st_wealth_trivia") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " Trivia Points"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_wealth_trivia")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if tonumber(GetVariable "st_wealth_train") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " Trains"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_wealth_train")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if tonumber(GetVariable "st_wealth_prac") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. " Practices"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_wealth_prac")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

  tempstorage = " :wealth " .. tempstorage

if (GetVariable "st_send_all") == "1" then
  if (GetVariable "strack_parse") == "" then
    SendNoEcho((GetVariable "st_send_results") .. tempstorage)
  else
    SendNoEcho((GetVariable "strack_parse") .. tempstorage)
  end
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_quest_active"
   match="*You gain an extra * quest points 'MCCP Bonus'."
   send_to="12"
   sequence="120"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_quest"), os.time ()))
  time_hh = (math.floor(math.abs(time_duration/3600)))
  time_mm = (math.floor(math.abs(time_duration/60))-(time_hh*60))
  time_ss = time_duration-(time_hh*3600)
  time_ss = time_ss-(time_mm*60)
  time_result = time_mm .. "mins" .. time_ss .. "secs"

  time_result = (GetVariable "st_send_colour_hilight")
  time_result = time_result .. "Time"
  time_result = time_result .. (GetVariable "st_send_colour_effect")
  time_result = time_result .. "("
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "min "
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "sec"
  time_result = time_result .. (GetVariable "st_send_colour_effect")
  time_result = time_result .. ")"

  SetVariable ("st_time_questduration", time_result)

SetVariable ("st_quest_reward_qpoint4", "%2")

x = "%2"
if tonumber(x) then
  SetVariable ("st_quest_reward_qpointtotal", (GetVariable "st_quest_reward_qpointtotal") + x)
  SetVariable ("st_quest_reward_qpointtotalall", (GetVariable "st_quest_reward_qpointtotalall") + x)
end

SetVariable ("st_toggle_display_quest", 0)
SetVariable ("st_counter_quest", (GetVariable "st_counter_quest") + 1)
SetVariable ("st_counter_questtotal", (GetVariable "st_counter_questtotal") + 1)
SetVariable ("st_counter_questtotalall", (GetVariable "st_counter_questtotalall") + 1)

DoAfterSpecial (1, 'Execute("strack_displayquest")', 12)
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_wealth_active"
   match="*Practices * : [*]*"
   send_to="12"
   sequence="101"
  >
  <send>x = (string.gsub("%3", ",", ""))

if tonumber(x) then
  SetVariable ("st_wealth_prac", tonumber(x))
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_quest_active"
   match="The gods reward you * bonus quest points to celebrate*"
   send_to="12"
   sequence="107"
   other_text_colour="orange"
  >
  <send>SetVariable ("st_quest_reward_qpoint6", "%1")

x = "%2"
if tonumber(x) then
  SetVariable ("st_quest_reward_qpointtotal", (GetVariable "st_quest_reward_qpointtotal") + x)
  SetVariable ("st_quest_reward_qpointtotalall", (GetVariable "st_quest_reward_qpointtotalall") + x)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_quest_active"
   match="*You gain a bonus practice*"
   send_to="12"
   sequence="108"
   other_text_colour="orange"
  >
  <send>SetVariable ("st_quest_reward_practice1", "1")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_necro"
   match="*You reach out and touch * with deadly necrotic poison."
   send_to="12"
   sequence="100"
   other_text_colour="yellow"
   other_back_colour="darkgreen"
  >
  <send>SetVariable ("skill_poison_necrotic_toggle", 1)
SetVariable ("skill_necrotic", 1)
SetVariable ("skill_poison_necrotic", (GetVariable "skill_poison_necrotic") + 1)
SetVariable ("st_skills_necrotictotal", (GetVariable "st_skills_necrotictotal") + 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_quest_active"
   match="*You gain a bonus training session*"
   send_to="12"
   sequence="108"
   other_text_colour="white"
   other_back_colour="magenta"
  >
  <send>SetVariable ("st_quest_reward_train1", 1)
-- Send("instinct deposit 1 confirm")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_balor"
   match="*You sense that your poison has greatly reduced*"
   send_to="12"
   sequence="100"
   other_text_colour="yellow"
   other_back_colour="darkgreen"
  >
  <send>SetVariable ("skill_poison_balor_toggle", 1)
SetVariable ("skill_balor", 1)
SetVariable ("skill_poison_balor", (GetVariable "skill_poison_balor") + 1)
SetVariable ("st_skills_balortotal", (GetVariable "st_skills_balortotal") + 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Earth *"
   send_to="12"
   sequence="108"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Earth"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_weapon_damage"
   make_underline="y"
   match="* is poisoned by the venom on *"
   send_to="12"
   sequence="100"
   other_text_colour="greenyellow"
  >
  <send>SetVariable ("weapon_damage_venom", GetVariable ("weapon_damage_venom") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_wealth_active"
   match="Gold on hand * : * *"
   send_to="12"
   sequence="108"
  >
  <send>x = (string.gsub("%3", ",", ""))

if tonumber(x) then
  SetVariable ("st_wealth_hand", tonumber(x))
end
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_assassin"
   match="*## You may now use Assassinate."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>SetVariable ("skill_assassin", 0)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_quest"
   match="*You use a daily blessing token to fully reset your quest time."
   send_to="12"
   sequence="100"
   other_text_colour="orange"
  >
  <send>SetVariable ("st_toggle_display_quest", 1)
InfoBackground ("red")

if GetVariable ("st_toggle_quest_report") == "1" then
  SendNoEcho(GetVariable "st_send_results" .. " :can now quest")
end

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="9"
   enabled="y"
   group="strack_quickbs"
   match="*## You may now use Quickstab abilities."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>SetVariable ("skill_quickbs", 0)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="*You get * gold coins from * of *"
   send_to="12"
   sequence="120"
   other_back_colour="white"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_kill"), os.time ()))
time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs(time_duration/3600))-(time_dd*24))
time_mm = (math.floor(math.abs(time_duration/60))-(time_hh*60))
time_ss = time_duration-(time_hh*3600)
time_ss = time_ss-(time_mm*60)

time_result = ""

if time_duration &gt; (60*60*24) then
  time_result = time_result .. time_dd
  time_result = time_result .. "days "
end

if time_duration &gt; (60*60) then
  time_result = time_result .. time_hh
  time_result = time_result .. "hrs "
end

if time_duration &gt; 60 then
  time_result = time_result .. time_mm
  time_result = time_result .. "mins "
end
  
if time_duration &gt; 0 then
  time_result = time_result .. time_ss
  time_result = time_result .. "secs"
end

x = (string.gsub("%2", ",", ""))
SetVariable ("st_last_kill", "%4")

if tonumber(x) then
  SetVariable ("st_counter_mobkilltotal", (GetVariable "st_counter_mobkilltotal") + 1)
  SetVariable ("st_counter_mobkillsession", (GetVariable "st_counter_mobkillsession") + 1)
  SetVariable ("st_counter_mobkillhour", (GetVariable "st_counter_mobkillhour") + 1)
  SetVariable ("st_counter_mobkilldouble", (GetVariable "st_counter_mobkilldouble") + 1)
  SetVariable ("st_counter_mobgoldtotal", (GetVariable "st_counter_mobgoldtotal") + x)
  SetVariable ("st_counter_mobgoldsession", (GetVariable "st_counter_mobgoldsession") + x)
  SetVariable ("st_counter_mobgoldhour", (GetVariable "st_counter_mobgoldhour") + x)
  SetVariable ("st_counter_mobgolddouble", (GetVariable "st_counter_mobgolddouble") + x)
end

if (GetVariable "st_toggle_map") == "1" then
  SendNoEcho("Map")
end

if (GetVariable "st_toggle_exit") == "1" then
  SendNoEcho("exits")
end

if (GetVariable "st_toggle_look") == "1" then
  SendNoEcho("Look")
end

SetVariable ("st_time_kill", os.time ())

DoAfterSpecial (0.5, 'Execute("strack_display")', 12)
if GetVariable("st_toggle_timerkill") == "1" then

    tempstorage=(GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "Last Kill"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. time_result
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ")"
    SendNoEcho("Echo " .. tempstorage)

end</send>
  </trigger>
  <trigger
   custom_colour="9"
   enabled="y"
   group="strack_double"
   match="*10 minutes of double exp started courtesy of donations*"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_toggle_display_double", 1)

SetVariable ("st_time_double", os.time ())
SetVariable ("st_counter_mobkilldouble", "0")
SetVariable ("st_counter_mobexpdouble", "0")
SetVariable ("st_counter_mobgolddouble", "0")

SetVariable ("st_counter_leveldouble", "0")
SetVariable ("st_counter_hourdouble", "0")

SetVariable ("st_counter_pupdouble", "0")
SetVariable ("st_counter_puptrainsdouble", "0")

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Water *"
   send_to="12"
   sequence="120"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Water"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end


--[[
if (GetVariable "strack_parse") == "" then
  if (GetVariable "strack_masteries") &gt; "" then
    SendNoEcho((GetVariable "st_send_results") .. (GetVariable "strack_masteries"))
  end
else
  if (GetVariable "strack_masteries") &gt; "" then
    SendNoEcho((GetVariable "strack_parse") .. (GetVariable "strack_masteries"))
  end
end

EnableGroup ("strack_masteries_active", false)
]]--</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_quest_active"
   match="*You receive * bonus quest points from your daily blessing."
   send_to="12"
   sequence="121"
   other_text_colour="orange"
  >
  <send>x = "%2"
if tonumber(x) then
  SetVariable ("st_quest_reward_qpoint5", x)
  SetVariable ("st_quest_reward_qpointtotal", (GetVariable "st_quest_reward_qpointtotal") + x)
  SetVariable ("st_quest_reward_qpointtotalall", (GetVariable "st_quest_reward_qpointtotalall") + x)
end

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_level"
   match="*You are level *."
   send_to="12"
   sequence="101"
  >
  <send>SetVariable ("st_level_player", "%2")
SetVariable ("st_player_level", "%2")
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active_temp"
   match="Water OLD *"
   send_to="12"
   sequence="121"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Water"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end

if (GetVariable "strack_parse") == "" then
  if (GetVariable "strack_masteries") &gt; "" then
    SendNoEcho((GetVariable "st_send_results") .. (GetVariable "strack_masteries"))
  end
else
  if (GetVariable "strack_masteries") &gt; "" then
    SendNoEcho((GetVariable "strack_parse") .. (GetVariable "strack_masteries"))
  end
end

EnableGroup ("strack_masteries_active", false)
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_level"
   match="*You gain * hit points, * mana, * moves, * practices and * trains."
   send_to="12"
   sequence="101"
  >
  <send>SetVariable ("st_level_hps", "%2")
SetVariable ("st_level_mana", "%3")
SetVariable ("st_level_moves", "%4")
SetVariable ("st_level_practices", "%5")
SetVariable ("st_level_trains", "%6")

  time_duration = math.abs(os.difftime ((GetVariable "st_time_level"), os.time ()))
  time_hh = (math.floor(math.abs(time_duration/3600)))
  time_mm = (math.floor(math.abs(time_duration/60))-(time_hh*60))
  time_ss = time_duration-(time_hh*3600)
  time_ss = time_ss-(time_mm*60)
  time_result = time_hh .."hr" .. time_mm .. "mins" .. time_ss .. "secs"

  tempstorage = " :levelled " .. (GetVariable "st_counter_levelsession") .. "x to "
  tempstorage = tempstorage .. (GetVariable "st_level_player") .. " "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "HPs"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_level_hps")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Mana"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_level_mana")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Moves"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_level_moves")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Practices"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_level_practices")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Trains"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_level_trains")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"

  SetVariable ("st_last_level", tempstorage)

  SetVariable ("st_level_skills", "")
  EnableGroup ("strack_level_skills", true)

  DoAfterSpecial (1, 'Execute("lastlevelauto")', 12)
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_venomist"
   match="*You coat * with deadly poison."
   send_to="12"
   sequence="125"
  >
  <send>SetVariable ("st_skills_envenomsession", (GetVariable "st_skills_envenomsession") + 1)
SetVariable ("st_skills_envenomtotal", (GetVariable "st_skills_envenomtotal") + 1)
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_poison"
   match="*appears much weaker and extremely vulnerable."
   send_to="12"
   sequence="101"
   other_text_colour="yellow"
   other_back_colour="darkgreen"
  >
  <send>SetVariable ("skill_poison_green", (GetVariable "skill_poison_green") + 1)
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_poison"
   match="*appears to falter. Your victim is in serious trouble!"
   send_to="12"
   sequence="101"
   other_text_colour="yellow"
   other_back_colour="darkgreen"
  >
  <send>SetVariable ("skill_poison_hydra", (GetVariable "skill_poison_hydra") + 1)</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_poison"
   match="*falls to * knees blinded."
   send_to="12"
   sequence="101"
   other_text_colour="yellow"
   other_back_colour="darkgreen"
  >
  <send>SetVariable ("skill_poison_marbu", (GetVariable "skill_poison_marbu") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_pups_active"
   match="You gain a bonus * point!"
   omit_from_log="y"
   send_to="12"
   sequence="101"
  >
  <send>SetVariable ("st_counter_pupskills", (GetVariable "st_counter_pupskills") .. "%1 ")

SetVariable ("st_counter_pupstatstotal", (GetVariable "st_counter_pupstatstotal") +1)
SetVariable ("st_counter_pupstatssession", (GetVariable "st_counter_pupstatssession") +1)
SetVariable ("st_counter_pupstatshour", (GetVariable "st_counter_pupstatshour") +1)

</send>
  </trigger>
  <trigger
   group="strack_level_skills"
   keep_evaluating="y"
   match="You gain a bonus *!"
   send_to="12"
   sequence="101"
  >
  <send>SetVariable ("st_level_skills", (GetVariable "st_level_skills") .. ", %1")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_quest_active"
   match="*You gain a bonus * practice*"
   send_to="12"
   sequence="109"
   other_text_colour="orange"
  >
  <send>SetVariable ("st_quest_reward_practice2", "%2")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You receive * experience points."
   send_to="12"
   sequence="101"
  >
  <send>x = "%1"

if tonumber(x) then
  SetVariable ("st_counter_mobexptotal", (GetVariable "st_counter_mobexptotal") + x)
  SetVariable ("st_counter_mobexpsession", (GetVariable "st_counter_mobexpsession") + x)
  SetVariable ("st_counter_mobexphour", (GetVariable "st_counter_mobexphour") + x)
  SetVariable ("st_counter_mobexpdouble", (GetVariable "st_counter_mobexpdouble") + x)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Energy *"
   send_to="12"
   sequence="109"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Energy"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="9"
   enabled="y"
   group="strack_quickbs"
   match="*Your feel a little less focused on your backstab skills."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>temp=0</send>
  </trigger>
  <trigger
   custom_colour="9"
   group="strack_quest_active"
   ignore_case="y"
   match="^\*\* You gain a bonus trivia point! \*\*$"
   omit_from_log="y"
   regexp="y"
   send_to="12"
   sequence="109"
   other_text_colour="orange"
  >
  <send>SetVariable ("st_counter_trivia", (GetVariable "st_counter_trivia") + 1)
SetVariable ("st_counter_triviasession", (GetVariable "st_counter_triviasession") + 1)

SetVariable ("st_quest_reward_trivia", "1")
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_double"
   match="*Double exp is not currently running."
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_toggle_display_double", 0)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Fire *"
   send_to="12"
   sequence="110"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Fire"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="9"
   enabled="y"
   group="strack_double"
   match="*Double exp will expire in roughly *"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_toggle_display_double", 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Holy *"
   send_to="12"
   sequence="111"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Holy"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_quickbs"
   match="*Your weapon hand pulses with energy, ready to strike."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>SetVariable ("st_skills_quickbs", (GetVariable "st_skills_quickbs") + 1)
SetVariable ("st_skills_quickbstotal", (GetVariable "st_skills_quickbstotal") + 1)

SetVariable ("skill_quickbs", 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="9"
   enabled="y"
   group="strack_double"
   match="*Double experience for 10 minutes courtesy of *"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_toggle_display_double", 1)

SetVariable ("st_time_double", os.time ())
SetVariable ("st_counter_mobkilldouble", "0")
SetVariable ("st_counter_mobexpdouble", "0")
SetVariable ("st_counter_mobgolddouble", "0")

SetVariable ("st_counter_leveldouble", "0")
SetVariable ("st_counter_hourdouble", "0")

SetVariable ("st_counter_pupdouble", "0")
SetVariable ("st_counter_puptrainsdouble", "0")

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_trivia"
   match="*blesses you with a Trivia Point Token."
   omit_from_log="y"
   send_to="12"
   sequence="100"
   other_text_colour="white"
   other_back_colour="purple"
  >
  <send>SetVariable ("st_counter_triviabless", (GetVariable "st_counter_triviabless") + 1)
SetVariable ("st_counter_triviasession", (GetVariable "st_counter_triviasession") + 1)

tempstorage = " :Trivia from Blessing!"

SetVariable ("st_last_trivia", tempstorage)

if (GetVariable "st_send_all") == "1" then
  if (GetVariable "st_toggle_trivia_report") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_trivia"))
  end
end
</send>
  </trigger>
  <trigger
   custom_colour="9"
   enabled="y"
   group="strack_double"
   match="*Enjoy the double*"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_toggle_display_double", 1)

SetVariable ("st_time_double", os.time ())
SetVariable ("st_counter_mobkilldouble", "0")
SetVariable ("st_counter_mobexpdouble", "0")
SetVariable ("st_counter_mobgolddouble", "0")

SetVariable ("st_counter_leveldouble", "0")
SetVariable ("st_counter_hourdouble", "0")

SetVariable ("st_counter_pupdouble", "0")
SetVariable ("st_counter_puptrainsdouble", "0")

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="*gives you * gold coin* for the * corpse of *"
   omit_from_output="y"
   send_to="12"
   sequence="125"
  >
  <send>x = (string.gsub("%2", ",", ""))

if tonumber(x) then
  SetVariable ("st_counter_mobgoldtotal", (GetVariable "st_counter_mobgoldtotal") + x)
  SetVariable ("st_counter_mobgoldsession", (GetVariable "st_counter_mobgoldsession") + x)
  SetVariable ("st_counter_mobgoldhour", (GetVariable "st_counter_mobgoldhour") + x)
  SetVariable ("st_counter_mobgolddouble", (GetVariable "st_counter_mobgolddouble") + x)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_bandit"
   match="You fenced * item* for * gold."
   send_to="12"
   sequence="125"
  >
  <send>w = (string.gsub("%1", ",", ""))
x = (string.gsub("%3", ",", ""))

if tonumber(w) then
  SetVariable ("st_skills_fence", (GetVariable "st_skills_fence") + w)
  SetVariable ("st_skills_fencetotal", (GetVariable "st_skills_fencetotal") + w)
end

if tonumber(x) then
  SetVariable ("st_counter_fencegoldsession", (GetVariable "st_counter_fencegoldsession") + x)
  SetVariable ("st_counter_fencegoldtotal", (GetVariable "st_counter_fencegoldtotal") + x)

  SetVariable ("st_counter_mobgoldtotal", (GetVariable "st_counter_mobgoldtotal") + x)
  SetVariable ("st_counter_mobgoldsession", (GetVariable "st_counter_mobgoldsession") + x)
  SetVariable ("st_counter_mobgoldhour", (GetVariable "st_counter_mobgoldhour") + x)
  SetVariable ("st_counter_mobgolddouble", (GetVariable "st_counter_mobgolddouble") + x)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You haggle with * for an extra * gold."
   send_to="12"
   sequence="125"
  >
  <send>x = (string.gsub("%2", ",", ""))

if tonumber(x) then
  SetVariable ("st_counter_mobgoldtotal", (GetVariable "st_counter_mobgoldtotal") + x)
  SetVariable ("st_counter_mobgoldsession", (GetVariable "st_counter_mobgoldsession") + x)
  SetVariable ("st_counter_mobgoldhour", (GetVariable "st_counter_mobgoldhour") + x)
  SetVariable ("st_counter_mobgolddouble", (GetVariable "st_counter_mobgolddouble") + x)
end
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_poison"
   match="*is weakened even further by your poison."
   send_to="12"
   sequence="101"
   other_text_colour="yellow"
   other_back_colour="darkgreen"
  >
  <send>SetVariable ("skill_poison_marbu", (GetVariable "skill_poison_marbu") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You sell * for * gold."
   send_to="12"
   sequence="125"
  >
  <send>x = (string.gsub("%2", ",", ""))

if tonumber(x) then
  SetVariable ("st_counter_mobgoldtotal", (GetVariable "st_counter_mobgoldtotal") + x)
  SetVariable ("st_counter_mobgoldsession", (GetVariable "st_counter_mobgoldsession") + x)
  SetVariable ("st_counter_mobgoldhour", (GetVariable "st_counter_mobgoldhour") + x)
  SetVariable ("st_counter_mobgolddouble", (GetVariable "st_counter_mobgolddouble") + x)
end
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_poison"
   match="*turns pale and appears weakened."
   send_to="12"
   sequence="101"
   other_text_colour="yellow"
   other_back_colour="darkgreen"
  >
  <send>SetVariable ("skill_poison_kobold", (GetVariable "skill_poison_kobold") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You are charged * gold clan skill tax."
   omit_from_output="y"
   send_to="12"
   sequence="128"
  >
  <send>x = (string.gsub("%1", ",", ""))

if tonumber(x) then
  SetVariable ("st_counter_mobgoldtotal", (GetVariable "st_counter_mobgoldtotal") - x)
  SetVariable ("st_counter_mobgoldsession", (GetVariable "st_counter_mobgoldsession") - x)
  SetVariable ("st_counter_mobgoldhour", (GetVariable "st_counter_mobgoldhour") - x)
  SetVariable ("st_counter_mobgolddouble", (GetVariable "st_counter_mobgolddouble") - x)

  SetVariable ("st_counter_clantaxsession", (GetVariable "st_counter_clantaxsession") + x)

  if (GetVariable "st_counter_clantaxsession") then
    tempstorage = (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "Tax"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. "+" .. %1
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. " ="
    tempstorage = tempstorage .. (GetVariable "st_counter_clantaxsession")
    tempstorage = tempstorage .. " gold this session"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ")"

    if GetVariable("st_toggle_tax") == "1" then
      SendNoEcho("Echo " .. tempstorage)
    end

  end
end

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Bash *"
   send_to="12"
   sequence="101"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Bash"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_global"
   match="Congratulations, that was one of the GLOBAL QUEST mobs!"
   send_to="12"
   sequence="101"
   other_back_colour="gold"
  >
  <send>SetVariable ("st_counter_globalmobsession", (GetVariable "st_counter_globalmobsession") + 1)
SetVariable ("st_counter_globalmobtotal", (GetVariable "st_counter_globalmobtotal") + 1)

SetVariable ("st_quest_reward_qpointtotal", (GetVariable "st_quest_reward_qpointtotal") + 3)
SetVariable ("st_quest_reward_qpointtotalall", (GetVariable "st_quest_reward_qpointtotalall") + 3)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_attrib_active"
   match="Dex :[*/*]  Con :[*/*]  Luck:[*/*]  Dr :[*]"
   omit_from_log="y"
   send_to="12"
   sequence="101"
  >
  <send>SetVariable ("str_attrib_dex_total", tonumber("%1"))
SetVariable ("str_attrib_dex_base", tonumber("%2"))
SetVariable ("str_attrib_con_total", tonumber("%3"))
SetVariable ("str_attrib_con_base", tonumber("%4"))
SetVariable ("str_attrib_luck_total", tonumber("%5"))
SetVariable ("str_attrib_luck_base", tonumber("%6"))
SetVariable ("str_attrib_dr", tonumber("%7"))</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_poison"
   match="Your acidic venom burns away*"
   send_to="12"
   sequence="101"
   other_text_colour="yellow"
   other_back_colour="darkgreen"
  >
  <send>SetVariable ("skill_poison_raven", (GetVariable "skill_poison_raven") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_wealth_active"
   match="*Trains * : [*]*"
   send_to="12"
   sequence="102"
  >
  <send>x = (string.gsub("%3", ",", ""))

if tonumber(x) then
  SetVariable ("st_wealth_train", tonumber(x))
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_player"
   match="*online since*"
   omit_from_log="y"
   send_to="12"
   sequence="102"
  >
  <send>EnableGroup ("strack_player", false)</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_attrib_active"
   match="Hp:[*/*]  Mn:[*/*]  Mv:[*/*]"
   omit_from_log="y"
   send_to="12"
   sequence="102"
  >
  <send>SetVariable ("str_attrib_hp_total", tonumber("%1"))
SetVariable ("str_attrib_hp_base", tonumber("%2"))
SetVariable ("str_attrib_mn_total", tonumber("%3"))
SetVariable ("str_attrib_mn_base", tonumber("%4"))
SetVariable ("str_attrib_mv_total", tonumber("%5"))
SetVariable ("str_attrib_mv_base", tonumber("%6"))
</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_trivia"
   match="*blesses you with a trivia point!"
   omit_from_log="y"
   send_to="12"
   sequence="100"
   other_text_colour="white"
   other_back_colour="purple"
  >
  <send>SetVariable ("st_counter_triviabless", (GetVariable "st_counter_triviabless") + 1)
SetVariable ("st_counter_triviasession", (GetVariable "st_counter_triviasession") + 1)

tempstorage = " :Trivia from Blessing!"

SetVariable ("st_last_trivia", tempstorage)

if (GetVariable "st_send_all") == "1" then
  if (GetVariable "st_toggle_trivia_report") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_trivia"))
  end
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="Pierce *"
   send_to="12"
   sequence="102"
  >
  <send>st_masteries_str = "%1"
st_masteries_table = {}

for w in string.gmatch(st_masteries_str, "%d+") do
  table.insert (st_masteries_table, tonumber(w))
end

if st_masteries_table[1] &gt; 0 then
  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Pierce"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. st_masteries_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
  SetVariable ("strack_masteries", (GetVariable "strack_masteries") .. tempstorage)
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_dodges"
   match="*holy rift protects you*"
   omit_from_log="y"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_dodges_rift", (GetVariable "st_dodges_rift") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_quest"
   match="*QUEST: You may now quest again."
   omit_from_output="y"
   send_to="12"
   sequence="100"
   other_text_colour="orange"
  >
  <send>SetVariable ("st_toggle_display_quest", 1)
InfoBackground ("red")

if GetVariable ("st_toggle_quest_report") == "1" then
  SendNoEcho(GetVariable "st_send_results" .. " :can now quest")
end

if "Quest.bmp" then
  SetBackgroundImage("Quest.bmp", 0)
end

Execute("strack_display")</send>
  </trigger>
  <trigger
   enabled="y"
   group="strack_reset"
   match="*Reconnecting to Game*"
   send_to="12"
   sequence="100"
  >
  <send>Note("Initiating New Session")
Execute("st_initiate")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You are taxed * gold by your clan."
   omit_from_output="y"
   send_to="12"
   sequence="128"
  >
  <send>x = (string.gsub("%1", ",", ""))

if tonumber(x) then
  SetVariable ("st_counter_mobgoldtotal", (GetVariable "st_counter_mobgoldtotal") - x)
  SetVariable ("st_counter_mobgoldsession", (GetVariable "st_counter_mobgoldsession") - x)
  SetVariable ("st_counter_mobgoldhour", (GetVariable "st_counter_mobgoldhour") - x)
  SetVariable ("st_counter_mobgolddouble", (GetVariable "st_counter_mobgolddouble") - x)

  SetVariable ("st_counter_clantaxsession", (GetVariable "st_counter_clantaxsession") + x)

  if (GetVariable "st_counter_clantaxsession") then
    tempstorage = (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "Tax"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. "+" .. %1
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. " ="
    tempstorage = tempstorage .. (GetVariable "st_counter_clantaxsession")
    tempstorage = tempstorage .. " gold this session"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ")"

    if GetVariable("st_toggle_tax") == "1" then
      SendNoEcho("Echo " .. tempstorage)
    end

  end
end

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You are taxed * gold coins by your clan."
   omit_from_output="y"
   send_to="12"
   sequence="128"
  >
  <send>x = (string.gsub("%1", ",", ""))

if tonumber(x) then
  SetVariable ("st_counter_mobgoldtotal", (GetVariable "st_counter_mobgoldtotal") - x)
  SetVariable ("st_counter_mobgoldsession", (GetVariable "st_counter_mobgoldsession") - x)
  SetVariable ("st_counter_mobgoldhour", (GetVariable "st_counter_mobgoldhour") - x)
  SetVariable ("st_counter_mobgolddouble", (GetVariable "st_counter_mobgolddouble") - x)

  SetVariable ("st_counter_clantaxsession", (GetVariable "st_counter_clantaxsession") + x)

  if (GetVariable "st_counter_clantaxsession") then
    tempstorage = (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "Tax"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. "+" .. %1
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. " ="
    tempstorage = tempstorage .. (GetVariable "st_counter_clantaxsession")
    tempstorage = tempstorage .. " gold this session"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ")"

    if GetVariable("st_toggle_tax") == "1" then
      SendNoEcho("Echo " .. tempstorage)
    end

  end
end

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="## You killed an outlaw!! 500k gold awarded!"
   send_to="12"
   sequence="129"
  >
  <send>x = "500000"

if tonumber(x) then
  SetVariable ("st_counter_mobgoldtotal", (GetVariable "st_counter_mobgoldtotal") + x)
  SetVariable ("st_counter_mobgoldsession", (GetVariable "st_counter_mobgoldsession") + x)
  SetVariable ("st_counter_mobgoldhour", (GetVariable "st_counter_mobgoldhour") + x)
  SetVariable ("st_counter_mobgolddouble", (GetVariable "st_counter_mobgolddouble") + x)
end

Execute("strack_display")</send>
  </trigger>
  <trigger
   enabled="y"
   group="strack_global"
   match="Global Quest: The extended global quest is now over."
   send_to="12"
   sequence="101"
   other_back_colour="gold"
  >
  <send>SetVariable ("st_toggle_display_global", 0)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_masteries_active"
   match="*Totals:* * *"
   send_to="12"
   sequence="130"
  >
  <send>if (GetVariable "strack_parse") == "" then
  if (GetVariable "strack_masteries") &gt; "" then
    SendNoEcho((GetVariable "st_send_results") .. (GetVariable "strack_masteries"))
  end
else
  if (GetVariable "strack_masteries") &gt; "" then
    SendNoEcho((GetVariable "strack_parse") .. (GetVariable "strack_masteries"))
  end
end

EnableGroup ("strack_masteries_active", false)
</send>
  </trigger>
  <trigger
   custom_colour="17"
   group="strack_global"
   match="Global Quest: The global quest will go into extended time for 3 more minutes."
   send_to="12"
   sequence="101"
   other_back_colour="gold"
  >
  <send>if (GetVariable "st_toggle_display_global") == "0" then
  SetVariable ("st_toggle_display_global", 1)
end

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="Your daily blessing added * gold to the corpse."
   send_to="12"
   sequence="130"
  >
  <send>dummy=0</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_pups_active"
   match="Lucky! You gain an extra * training session*"
   omit_from_log="y"
   send_to="12"
   sequence="101"
  >
  <send>SetVariable ("st_counter_puptrains", (GetVariable "st_counter_puptrains") + "%1")
SetVariable ("st_counter_puptrainssession", (GetVariable "st_counter_puptrainssession") + "%1")
SetVariable ("st_counter_puptrainstotal", (GetVariable "st_counter_puptrainstotal") + "%1")
SetVariable ("st_counter_puptrainsdouble", (GetVariable "st_counter_puptrainsdouble") + "%1")
SetVariable ("st_counter_puptrainshour", (GetVariable "st_counter_puptrainshour") + "%1")
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_level_skills"
   keep_evaluating="y"
   match="Lucky! You gain an extra * training session*"
   send_to="12"
   sequence="101"
  >
  <send>SetVariable ("st_level_skills", (GetVariable "st_level_skills") .. ", Lucky %1 trains")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_global"
   match="Reward of * quest points added."
   send_to="12"
   sequence="101"
   other_back_colour="gold"
  >
  <send>x = "%1"
if tonumber(x) then
  SetVariable ("st_quest_reward_qpointtotal", (GetVariable "st_quest_reward_qpointtotal") + x)
  SetVariable ("st_quest_reward_qpointtotalall", (GetVariable "st_quest_reward_qpointtotalall") + x)
end

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_quest"
   match="You are on a quest to slay *!"
   send_to="12"
   sequence="102"
  >
  <send>SetVariable ("st_quest_mob", "%1")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You receive * 'rare kill' experience bonus*"
   send_to="12"
   sequence="102"
  >
  <send>x = "%1"

if tonumber(x) then
  SetVariable ("st_counter_mobexptotal", (GetVariable "st_counter_mobexptotal") + x)
  SetVariable ("st_counter_mobexpsession", (GetVariable "st_counter_mobexpsession") + x)
  SetVariable ("st_counter_mobexphour", (GetVariable "st_counter_mobexphour") + x)
  SetVariable ("st_counter_mobexpdouble", (GetVariable "st_counter_mobexpdouble") + x)
end</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You receive * bonus experience point* courtesy of *"
   send_to="12"
   sequence="102"
  >
  <send>x = "%1"

if tonumber(x) then
  SetVariable ("st_counter_mobexptotal", (GetVariable "st_counter_mobexptotal") + x)
  SetVariable ("st_counter_mobexpsession", (GetVariable "st_counter_mobexpsession") + x)
  SetVariable ("st_counter_mobexphour", (GetVariable "st_counter_mobexphour") + x)
  SetVariable ("st_counter_mobexpdouble", (GetVariable "st_counter_mobexpdouble") + x)
end</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_counter_mobkills"
   match="You receive * bonus experience point* courtesy of * daily blessing."
   send_to="12"
   sequence="102"
  >
  <send>x = "%1"

if tonumber(x) then
  SetVariable ("st_counter_mobexptotal", (GetVariable "st_counter_mobexptotal") + x)
  SetVariable ("st_counter_mobexpsession", (GetVariable "st_counter_mobexpsession") + x)
  SetVariable ("st_counter_mobexphour", (GetVariable "st_counter_mobexphour") + x)
  SetVariable ("st_counter_mobexpdouble", (GetVariable "st_counter_mobexpdouble") + x)
end</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_weapon_damage"
   make_underline="y"
   match="*muscles stop responding."
   send_to="12"
   sequence="100"
   other_text_colour="dodgerblue"
  >
  <send>SetVariable ("weapon_damage_shocking", GetVariable ("weapon_damage_shocking") + 1)</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You receive * bonus experience point* from your *"
   send_to="12"
   sequence="102"
  >
  <send>x = "%1"

if tonumber(x) then
  SetVariable ("st_counter_mobexptotal", (GetVariable "st_counter_mobexptotal") + x)
  SetVariable ("st_counter_mobexpsession", (GetVariable "st_counter_mobexpsession") + x)
  SetVariable ("st_counter_mobexphour", (GetVariable "st_counter_mobexphour") + x)
  SetVariable ("st_counter_mobexpdouble", (GetVariable "st_counter_mobexpdouble") + x)
end</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_weapon_damage"
   make_underline="y"
   match="*turns blue and shivers."
   send_to="12"
   sequence="100"
   other_text_colour="cyan"
  >
  <send>SetVariable ("weapon_damage_frost", GetVariable ("weapon_damage_frost") + 1)</send>
  </trigger>
  <trigger
   custom_colour="9"
   enabled="y"
   group="strack_quickbs"
   match="*You are already more adept at backstab."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>SetVariable ("skill_quickbs", 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_stealth"
   match="*You are already stealthy."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>SetVariable ("skill_stealth", 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="9"
   enabled="y"
   group="strack_pups"
   match="Congratulations, hero. You have increased your powers!"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup ("strack_pups_active", true)
SetVariable ("st_counter_pupskills", "")

SetVariable ("st_counter_pupsession", (GetVariable "st_counter_pupsession") + 1)
SetVariable ("st_counter_puptotal", (GetVariable "st_counter_puptotal") + 1)

SetVariable ("st_counter_puphour", (GetVariable "st_counter_puphour") + 1)
SetVariable ("st_counter_pupdouble", (GetVariable "st_counter_pupdouble") + 1)

DoAfterSpecial (1, 'Execute("lastpupauto")', 12)</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_stealth"
   match="*You are no longer stealthy."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>stealth=1</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_quest"
   match="*tells you 'I thought you could handle such a simple task.'"
   send_to="12"
   sequence="400"
  >
  <send>SetVariable ("st_toggle_display_quest", 0)

SetVariable ("st_quest_result", (GetVariable "st_send_colour_norm") .. "abandoned!")
SetVariable ("st_last_quest", (GetVariable "st_quest_task") .. ": " .. GetVariable ("st_quest_result"))

if (GetVariable "st_send_all") == "1" then
  if (GetVariable "st_toggle_quest_report") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. " Result " .. (GetVariable "st_quest_result"))
  end
end

DoAfterSpecial (1, 'EnableGroup ("strack_quest_active", false)', 12)

SetBackgroundImage("background.bmp", 0)
InfoBackground ("white")
SetStatus("")
Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_stealth"
   match="*You are now stealthy."
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>SetVariable ("st_skills_stealth", (GetVariable "st_skills_stealth") + 1)
SetVariable ("st_skills_stealthtotal", (GetVariable "st_skills_stealthtotal") + 1)

SetVariable ("skill_stealth", 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_quest"
   match="QUEST: You have run out of time for your quest*"
   send_to="12"
   sequence="400"
  >
  <send>SetVariable ("st_toggle_display_quest", 0)

SetVariable ("st_quest_result", "failed, ran out of time!")
SetVariable ("st_last_quest", (GetVariable "st_quest_task") .. ": " .. GetVariable ("st_quest_result"))

if (GetVariable "st_send_all") == "1" then
  if (GetVariable "st_toggle_quest_report") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. " :quest results " .. (GetVariable "st_quest_result"))
  end
end

DoAfterSpecial (1, 'EnableGroup ("strack_quest_active", false)', 12)

SetBackgroundImage("background.bmp", 0)
InfoBackground ("white")
SetStatus("")
Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_entrap"
   match="You are still recovering your Trapping abilities*"
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>SetVariable ("st_skills_entrap", (GetVariable "st_skills_entrap") + 1)
SetVariable ("st_skills_entraptotal", (GetVariable "st_skills_entraptotal") + 1)

SetVariable ("skill_entrap", 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="17"
   group="strack_quest"
   match="zzz You hang your head in shame and admit defeat before*"
   send_to="12"
   sequence="400"
   other_text_colour="white"
  >
  <send>SetVariable ("st_toggle_display_quest", 0)

SetVariable ("st_quest_result", "failed!")
SetVariable ("st_last_quest", (GetVariable "st_quest_task") .. ": " .. GetVariable ("st_quest_result"))

if (GetVariable "st_send_all") == "1" then
  if (GetVariable "st_toggle_quest_report") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. " :quest results " .. (GetVariable "st_quest_result"))
  end
end

DoAfterSpecial (1, 'EnableGroup ("strack_quest_active", false)', 12)

SetBackgroundImage("background.bmp", 0)
InfoBackground ("white")
SetStatus("")
Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_dodges"
   match="You blend*"
   omit_from_log="y"
   omit_from_output="y"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_dodges_blend", (GetVariable "st_dodges_blend") + 1)</send>
  </trigger>
  <trigger
   group="strack_level_skills"
   keep_evaluating="y"
   match="Skill *."
   send_to="12"
   sequence="101"
  >
  <send>SetVariable ("st_level_skills", (GetVariable "st_level_skills") .. ", %1")</send>
  </trigger>
  <trigger
   group="strack_level_skills"
   keep_evaluating="y"
   match="Spell *."
   send_to="12"
   sequence="101"
  >
  <send>SetVariable ("st_level_skills", (GetVariable "st_level_skills") .. ", %1")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_quest"
   match="You ask * for a quest."
   send_to="12"
   sequence="101"
  >
  <send>SetVariable ("st_quest_from", "%1")
SetVariable ("st_quest_mob", "")
SetVariable ("st_quest_room", "")
SetVariable ("st_quest_area", "")
SetVariable ("st_quest_task", "")
SetVariable ("st_quest_reward_qpoint1", "0")
SetVariable ("st_quest_reward_qpoint2", "0")
SetVariable ("st_quest_reward_qpoint3", "0")
SetVariable ("st_quest_reward_qpoint4", "0")
SetVariable ("st_quest_reward_qpoint5", "0")
SetVariable ("st_quest_reward_qpoint6", "0")
SetVariable ("st_quest_reward_gold1", "0")
SetVariable ("st_quest_reward_gold2", "0")
SetVariable ("st_quest_reward_train1", "0")
SetVariable ("st_quest_reward_train2", "0")
SetVariable ("st_quest_reward_practice1", "0")
SetVariable ("st_quest_reward_practice2", "0")
SetVariable ("st_quest_reward_trivia", "0")
SetVariable ("st_quest_result", "")
SendNoEcho("quest info")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_level_skills"
   keep_evaluating="y"
   match="You gain * extra trains daily blessing bonus."
   send_to="12"
   sequence="101"
  >
  <send>SetVariable ("st_level_skills", (GetVariable "st_level_skills") .. ", %1 extra daily bonus trains")</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_pups_active"
   match="You gain * extra trains daily blessing bonus."
   omit_from_log="y"
   send_to="12"
   sequence="101"
  >
  <send>SetVariable ("st_counter_puptrains", (GetVariable "st_counter_puptrains") + "%1")
SetVariable ("st_counter_puptrainssession", (GetVariable "st_counter_puptrainssession") + "%1")
SetVariable ("st_counter_puptrainstotal", (GetVariable "st_counter_puptrainstotal") + "%1")
SetVariable ("st_counter_puptrainsdouble", (GetVariable "st_counter_puptrainsdouble") + "%1")
SetVariable ("st_counter_puptrainshour", (GetVariable "st_counter_puptrainshour") + "%1")
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You receive * bonus experience point* in honor*"
   send_to="12"
   sequence="102"
  >
  <send>x = "%1"

if tonumber(x) then
  SetVariable ("st_counter_mobexptotal", (GetVariable "st_counter_mobexptotal") + x)
  SetVariable ("st_counter_mobexpsession", (GetVariable "st_counter_mobexpsession") + x)
  SetVariable ("st_counter_mobexphour", (GetVariable "st_counter_mobexphour") + x)
  SetVariable ("st_counter_mobexpdouble", (GetVariable "st_counter_mobexpdouble") + x)
end</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You receive * bonus experience points to celebrate * years of Aardwolf!"
   send_to="12"
   sequence="102"
  >
  <send>x = "%1"

if tonumber(x) then
  SetVariable ("st_counter_mobexptotal", (GetVariable "st_counter_mobexptotal") + x)
  SetVariable ("st_counter_mobexpsession", (GetVariable "st_counter_mobexpsession") + x)
  SetVariable ("st_counter_mobexphour", (GetVariable "st_counter_mobexphour") + x)
  SetVariable ("st_counter_mobexpdouble", (GetVariable "st_counter_mobexpdouble") + x)
end</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_counter_mobkills"
   match="You receive * bonus experience points to rejoice in the death of another million mobs."
   send_to="12"
   sequence="102"
  >
  <send>x = "%1"

if tonumber(x) then
  SetVariable ("st_counter_mobexptotal", (GetVariable "st_counter_mobexptotal") + x)
  SetVariable ("st_counter_mobexpsession", (GetVariable "st_counter_mobexpsession") + x)
  SetVariable ("st_counter_mobexphour", (GetVariable "st_counter_mobexphour") + x)
  SetVariable ("st_counter_mobexpdouble", (GetVariable "st_counter_mobexpdouble") + x)
end</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_wealth_active"
   match="*Trivia * : [*]*"
   send_to="12"
   sequence="103"
  >
  <send>x = (string.gsub("%3", ",", ""))

if tonumber(x) then
  SetVariable ("st_wealth_trivia", tonumber(x))
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   group="strack_equip_active"
   match="Equip Bonus *"
   send_to="12"
   sequence="100"
  >
  <send>str_stats_equip = "%1"
str_stats_table = {}

for w in string.gmatch(str_stats_equip, "%d+") do
  table.insert (str_stats_table, tonumber(w))
end

  tempstorage = (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Level "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_level_player")

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. " : "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Str"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. str_stats_table[1]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Int"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. str_stats_table[2]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Wis"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. str_stats_table[3]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Dex"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. str_stats_table[4]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Con"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. str_stats_table[5]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Luck"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. str_stats_table[6]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "TOTAL"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. str_stats_table[7]
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = " :equip bonus " .. tempstorage

if (GetVariable "st_send_all") == "1" then
  if (GetVariable "strack_parse") == "" then
    SendNoEcho((GetVariable "st_send_results") .. tempstorage)
  else
    SendNoEcho((GetVariable "strack_parse") .. tempstorage)
  end
end
</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_quest"
   match="*can be found in the vicinity of * which"
   send_to="12"
   sequence="103"
  >
  <send>SetVariable ("st_quest_room", "%2")</send>
  </trigger>
  <trigger
   custom_colour="9"
   enabled="y"
   group="strack_double"
   match="For the next * experience is doubled*"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_toggle_display_double", 1)

SetVariable ("st_time_double", os.time ())
SetVariable ("st_counter_mobkilldouble", "0")
SetVariable ("st_counter_mobexpdouble", "0")
SetVariable ("st_counter_mobgolddouble", "0")

SetVariable ("st_counter_leveldouble", "0")
SetVariable ("st_counter_hourdouble", "0")

SetVariable ("st_counter_pupdouble", "0")
SetVariable ("st_counter_puptrainsdouble", "0")

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_necro"
   match="*You are still recovering your Advanced Poisons abilities*"
   send_to="12"
   sequence="100"
   other_text_colour="yellow"
   other_back_colour="darkgreen"
  >
  <send>SetVariable ("skill_poison_necrotic_toggle", 1)
SetVariable ("skill_necro", 1)
Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_global"
   match="Global Quest: Global quest * has been declared*"
   send_to="12"
   sequence="100"
   other_back_colour="gold"
  >
  <send>SetVariable ("st_toggle_display_global", 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="9"
   enabled="y"
   group="strack_assassin"
   match="*You are still recovering your Assassinate abilities*"
   send_to="12"
   sequence="100"
   other_back_colour="yellow"
  >
  <send>SetVariable ("skill_assassin", 1)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="17"
   enabled="y"
   group="strack_global"
   match="Global Quest: The global quest has been cancelled due to lack of activity."
   omit_from_log="y"
   send_to="12"
   sequence="100"
   other_back_colour="gold"
  >
  <send>SetVariable ("st_toggle_display_global", 0)

Execute("strack_display")</send>
  </trigger>
  <trigger
   custom_colour="12"
   enabled="y"
   group="strack_balor"
   match="*You are still recovering your Balor abilities*"
   send_to="12"
   sequence="100"
   other_text_colour="yellow"
   other_back_colour="darkgreen"
  >
  <send>SetVariable ("skill_balor", 1)
SetVariable ("skill_poison_balor_toggle", 1)
Execute("strack_display")</send>
  </trigger>
</triggers>

<!--  Aliases  -->

<aliases>
  <alias
   match="st_masteries *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("strack_parse", "%1")
EnableGroup ("strack_masteries_active", true)
SetVariable ("strack_masteries", " :masteries ")
SendNoEcho("mastery totals")</send>
  </alias>
  <alias
   match="st_poison"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_session"), os.time ()))

time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs((time_duration/3600)-(time_dd*24))))
time_mm = (math.floor(math.abs((time_duration/60)-(time_dd*1440)-(time_hh*60))))
time_mmfull = (math.floor(math.abs((time_duration/60))))
time_ss = time_duration-(time_mmfull*60)

time_result = (GetVariable "st_send_colour_effect")
time_result = time_result .. "("

if time_duration &gt; (60*60*24) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_dd
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "days "
end

if time_duration &gt; (60*60) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_hh
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "hrs "
end

if time_duration &gt; 60 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "mins "
end
  
if time_duration &gt; 0 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "secs"
end

time_result = time_result .. (GetVariable "st_send_colour_effect")
time_result = time_result .. ")"

--[[ poisons ]]
tempstorage = ""

if tonumber(GetVariable "skill_poison_green") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "green"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_green")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_raven") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "raven"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_raven")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_hydra") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "hydra"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_hydra")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_kobold") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "kobold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_kobold")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_marbu") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "marbu"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_marbu")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_envenom") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "envenom"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_envenom")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_necrotic") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "necrotic"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_necrotic")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_balor") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "balor"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_balor")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

--[[ combine ]]

if tempstorage &gt; "" then
  SetVariable ("st_last_poison", tempstorage)

  tempstorage = " :poison hits "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "After"
  tempstorage = tempstorage .. time_result .. " "

  if tonumber(GetVariable "st_counter_mobkillsession") &gt; 0 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. "Mobs"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_mobkillsession")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ") "
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ": "
  end

  tempstorage = tempstorage .. (GetVariable "st_last_poison")
  SendNoEcho((GetVariable "st_send_results") .. tempstorage)

else
--  ColourNote ("black", "white", " st_poison ", "white", "black", " Nothing to report.")
  SetVariable ("st_last_poison", "empty")

end
</send>
  </alias>
  <alias
   match="st_poison *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_session"), os.time ()))

time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs((time_duration/3600)-(time_dd*24))))
time_mm = (math.floor(math.abs((time_duration/60)-(time_dd*1440)-(time_hh*60))))
time_mmfull = (math.floor(math.abs((time_duration/60))))
time_ss = time_duration-(time_mmfull*60)

time_result = (GetVariable "st_send_colour_effect")
time_result = time_result .. "("

if time_duration &gt; (60*60*24) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_dd
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "days "
end

if time_duration &gt; (60*60) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_hh
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "hrs "
end

if time_duration &gt; 60 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "mins "
end
  
if time_duration &gt; 0 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "secs"
end

time_result = time_result .. (GetVariable "st_send_colour_effect")
time_result = time_result .. ")"

--[[ poisons ]]
tempstorage = ""

if tonumber(GetVariable "skill_poison_green") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "grn"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_green")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_raven") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "rav"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_raven")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_hydra") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "hyd"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_hydra")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_kobold") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "kob"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_kobold")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_marbu") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "marb"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_marbu")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_envenom") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "env"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_envenom")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_necrotic") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "nec"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_necrotic")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "skill_poison_balor") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "bal"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "skill_poison_balor")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

--[[ combine ]]

if tempstorage &gt; "" then
  SetVariable ("st_last_poison", tempstorage)

  tempstorage = " :poison hits "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "After"
  tempstorage = tempstorage .. time_result .. " "

  if tonumber(GetVariable "st_counter_mobkillsession") &gt; 0 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. "Mobs"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_mobkillsession")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ") "
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ": "
  end

  tempstorage = tempstorage .. (GetVariable "st_last_poison")
  SendNoEcho("%1 " .. tempstorage)

else
--  ColourNote ("black", "white", " st_poison ", "white", "black", " Nothing to report.")
  SetVariable ("st_last_poison", "empty")

end
</send>
  </alias>
  <alias
   match="st_report"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_send_results", "GTELL")
if (GetVariable "st_send_all") == "1" then
  SendNoEcho((GetVariable "st_send_results") .. " :has entered the building.")
end

Execute("strack_display")</send>
  </alias>
  <alias
   match="st_report *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>if "%1" &gt; "" then
  SetVariable ("st_send_results", "%1")
  if (GetVariable "st_send_all") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. " :has entered the building.")
  end
else
  SetVariable ("st_send_results", "GTELL")
  if (GetVariable "st_send_all") == "1" then
    SendNoEcho((GetVariable "st_send_results") .. " :has entered the building.")
  end
end

Execute("strack_display")</send>
  </alias>
  <alias
   match="quit"
   enabled="y"
   group="strack_command_quit"
   omit_from_log="y"
   send_to="12"
   ignore_case="y"
   sequence="100"
  >
  <send>InfoClear()
InfoBackground ("white")
SetStatus("")
Save("")
Note("Closing Down")
DoAfterSpecial (5, 'Send ("quit")', 12)
</send>
  </alias>
  <alias
   match="st_reset"
   enabled="y"
   group="strack_reset"
   send_to="12"
   sequence="100"
  >
  <send>-- Created by Opochtli 2011/2012 for others to explore LUA scripting

  SetVariable ("st_time_total", "")
  SetVariable ("st_send_results", "")
  SetVariable ("st_counter_mobkilltotal", "0")
  SetVariable ("st_counter_mobexptotal", "0")
  SetVariable ("st_counter_mobgoldtotal", "0")
  SetVariable ("st_counter_fencegoldtotal","0")
  SetVariable ("st_counter_questtotal", "0")
  SetVariable ("st_counter_questtotalall", "0")

  SetVariable ("st_counter_globalmobtotal", "0")
  SetVariable ("st_counter_globaltotal", "0")

  SetVariable ("st_quest_reward_qpointtotalall", "0")
  SetVariable ("st_counter_vorpalstotal", "0")
  SetVariable ("st_counter_trivia", "0")
  SetVariable ("st_counter_triviamob", "0")
  SetVariable ("st_counter_triviabless", "0")

  SetVariable ("st_counter_skintotal", "0")
  SetVariable ("st_counter_trophytotal", "0")
  SetVariable ("st_counter_improvedtotal", "0")
  SetVariable ("st_counter_masteredtotal", "0")
  SetVariable ("st_counter_leveltotal", "0")
  SetVariable ("st_counter_puptotal", "0")
  SetVariable ("st_counter_puptrainstotal", "0")
  SetVariable ("st_counter_pupstatstotal", "0")
  SetVariable ("st_skills_envenomtotal", "0")
  SetVariable ("st_skills_necrotictotal", "0")
  SetVariable ("st_skills_balortotal", "0")
  SetVariable ("st_skills_stealthtotal", "0")
  SetVariable ("st_skills_suppresstotal", "0")
  SetVariable ("st_skills_deathblowtotal", "0")
  SetVariable ("st_skills_entraptotal", "0")
  SetVariable ("st_skills_quickbstotal", "0")
  SetVariable ("st_skills_assassintotal", "0")
  SetVariable ("st_skills_fencetotal", "0")
  SetVariable ("st_counter_doublestotal", "0")
  SetVariable ("st_toggle_vorpal_report", "1")
  SetVariable ("st_toggle_deathblow_report", "1")
  SetVariable ("st_toggle_trivia_report", "1")
  SetVariable ("st_toggle_skills_improved", "0")
  SetVariable ("st_toggle_skills_mastered", "1")
  SetVariable ("st_toggle_double", "0")
  SetVariable ("st_toggle_hour", "0")
  SetVariable ("st_toggle_pup", "1")
  SetVariable ("st_toggle_level", "1")
  SetVariable ("st_toggle_look", "1")
  SetVariable ("st_toggle_map", "0")
  SetVariable ("st_toggle_tax", "0")
  SetVariable ("st_toggle_timerkill", "0")
  SetVariable ("st_toggle_quest_report", "0")
  SetVariable ("st_toggle_exit", "0")

  SetVariable ("st_send_colour_norm", "")
  SetVariable ("st_send_colour_hilight", "")
  SetVariable ("st_send_colour_effect", "")

  SetVariable ("st_player_class", "")
  SetVariable ("st_player_gender", "")
  SetVariable ("st_player_level", "")
  SetVariable ("st_player_name", "")
  SetVariable ("st_player_race", "")
  SetVariable ("st_player_remort", "Single Class")
  SetVariable ("st_player_tier", "")


SetVariable ("st_toggle_market", "")
SetVariable ("st_toggle_display_total", "")
SetVariable ("st_toggle_display_quest", "")
SetVariable ("st_toggle_display_global", "")
SetVariable ("st_toggle_display_double", "")

ColourNote ("black", "white", " -RESET- ")
ColourNote ("white", "black", " ")
Execute("st_initiate")</send>
  </alias>
  <alias
   match="st_session"
   enabled="y"
   group="strack_reset"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("st_main_version", "v3.6h")

SetVariable ("st_send_all", "1")
SetBackgroundImage ("sharptracker.bmp", 0)

ShowInfoBar(true)
SetStatus(" ")
ResetStatusTime()
ResetTimers()
InfoClear()
InfoBackground ("white")
SetBackgroundColour (0x000000)
DoAfterSpecial (120, 'SetBackgroundImage ("background.bmp", 0)', 12)

SetVariable ("st_time_session", os.time ())
SetVariable ("st_time_double", os.time ())
SetVariable ("st_time_hour", os.time ())
SetVariable ("st_time_quest", os.time ())
SetVariable ("st_time_questduration","n/a")
SetVariable ("st_time_diff", os.time ())
SetVariable ("st_time_start", os.time ())
SetVariable ("st_time_kill", os.time ())
SetVariable ("st_time_level", os.time ())
SetVariable ("st_time_pup", os.time ())
SetVariable ("st_time_pupdiff", os.time ())

SetVariable ("st_counter_mobkillsession", "0")
SetVariable ("st_counter_mobkillhour", "0")
SetVariable ("st_counter_mobkilldouble", "0")

SetVariable ("st_counter_mobexpsession", "0")
SetVariable ("st_counter_mobexphour", "0")
SetVariable ("st_counter_mobexpdouble", "0")

SetVariable ("st_counter_mobgoldsession", "0")
SetVariable ("st_counter_mobgoldhour", "0")
SetVariable ("st_counter_mobgolddouble", "0")
SetVariable ("st_counter_fencegoldsession","0")
SetVariable ("st_counter_clantaxsession","0")

SetVariable ("st_counter_quest", "0")
SetVariable ("st_counter_gag", "0")
SetVariable ("st_counter_triviasession", "0")
SetVariable ("st_counter_vorpalsession", "0")
SetVariable ("st_counter_double", "0")

SetVariable ("st_counter_skin", "0")
SetVariable ("st_counter_trophy", "0")

SetVariable ("st_counter_pupsession", "0")
SetVariable ("st_counter_puptrains", "0")
SetVariable ("st_counter_puptrainssession", "0")
SetVariable ("st_counter_pupskills", "0")
SetVariable ("st_counter_pupdouble", "0")
SetVariable ("st_counter_puptrainsdouble", "0")
SetVariable ("st_counter_puphour", "0")
SetVariable ("st_counter_puptrainshour", "0")
SetVariable ("st_counter_pupstatsdouble", "0")
SetVariable ("st_counter_pupstatssession", "0")
SetVariable ("st_counter_pupstatshour", "0")

SetVariable ("st_counter_levelsession", "0")
SetVariable ("st_counter_leveldouble", "0")
SetVariable ("st_counter_levelhour", "0")

SetVariable ("st_dodges_misdirect", "0")
SetVariable ("st_dodges_blend", "0")
SetVariable ("st_dodges_blink", "0")
SetVariable ("st_dodges_dodge", "0")
SetVariable ("st_dodges_parry", "0")
SetVariable ("st_dodges_time", "0")
SetVariable ("st_dodges_divine", "0")
SetVariable ("st_dodges_rift", "0")
SetVariable ("st_dodges_luck", "0")

SetVariable ("skill_stealth", "1")
SetVariable ("skill_suppress", "1")
SetVariable ("skill_entrap", "1")
SetVariable ("skill_assassin", "1")
SetVariable ("skill_quickbs", "1")
SetVariable ("skill_balor", "1")
SetVariable ("skill_necrotic", "1")
SetVariable ("skill_poison_envenom", "0")
SetVariable ("skill_poison_balor_toggle", "0")
SetVariable ("skill_poison_balor", "0")
SetVariable ("skill_poison_necrotic_toggle", "0")
SetVariable ("skill_poison_necrotic", "0")
SetVariable ("skill_poison_green", "0")
SetVariable ("skill_poison_marbu", "0")
SetVariable ("skill_poison_kobold", "0")
SetVariable ("skill_poison_raven", "0")
SetVariable ("skill_poison_hydra", "0")

SetVariable ("weapon_damage_flaming", "0")
SetVariable ("weapon_damage_shocking", "0")
SetVariable ("weapon_damage_frost", "0")
SetVariable ("weapon_damage_venom", "0")
SetVariable ("weapon_damage_vamperic", "0")
SetVariable ("weapon_damage_counter", "0")

SetVariable ("st_last_double", "")
SetVariable ("st_last_hour", "")
SetVariable ("st_last_level", "")
SetVariable ("st_last_quest", "")
SetVariable ("st_last_vorpal", "")
SetVariable ("st_last_deathblow", "")
SetVariable ("st_last_trivia", "")
SetVariable ("st_last_kill", "")
SetVariable ("st_last_weapons", "")
SetVariable ("st_last_poison", "")
SetVariable ("st_last_dodge", "")
SetVariable ("st_last_pup", "")
SetVariable ("st_last_vorpalsession", "")

SetVariable ("st_level_player", "0")
SetVariable ("st_level_hps", "0")
SetVariable ("st_level_mana", "0")
SetVariable ("st_level_moves", "0")
SetVariable ("st_level_practices", "0")
SetVariable ("st_level_trains", "0")
SetVariable ("st_level_skills", "")

SetVariable ("st_skills_improved", "0")
SetVariable ("st_skills_mastered", "0")
SetVariable ("st_skills_stealth", "0")
SetVariable ("st_skills_suppress", "0")
SetVariable ("st_skills_deathblow", "0")
SetVariable ("st_skills_entrap", "0")
SetVariable ("st_skills_assassin", "0")
SetVariable ("st_skills_fence", "0")
SetVariable ("st_skills_envenomsession", "0")
SetVariable ("st_skills_quickbs", "0")

SetVariable ("st_quest_from", "")
SetVariable ("st_quest_mob", "")
SetVariable ("st_quest_room", "")
SetVariable ("st_quest_area", "")
SetVariable ("st_quest_task", "")
SetVariable ("st_quest_reward_qpoint1", "0")
SetVariable ("st_quest_reward_qpoint2", "0")
SetVariable ("st_quest_reward_qpoint3", "0")
SetVariable ("st_quest_reward_qpoint4", "0")
SetVariable ("st_quest_reward_qpoint5", "0")
SetVariable ("st_quest_reward_qpoint6", "0")
SetVariable ("st_quest_reward_qpointtotal", "0")
SetVariable ("st_quest_reward_gold1", "0")
SetVariable ("st_quest_reward_gold2", "0")
SetVariable ("st_quest_reward_train1", "0")
SetVariable ("st_quest_reward_train2", "0")
SetVariable ("st_quest_reward_practice1", "0")
SetVariable ("st_quest_reward_practice2", "0")
SetVariable ("st_quest_reward_trivia", "0")
SetVariable ("st_quest_result", "")
SetVariable ("st_toggle_display_quest", 0)
SetVariable ("st_toggle_display_global", 0)

SetVariable ("st_counter_globalmobsession", "0")
SetVariable ("st_counter_globalsession", "0")

SetVariable ("str_attrib_str_total", "0")
SetVariable ("str_attrib_str_base", "0")
SetVariable ("str_attrib_int_total", "0")
SetVariable ("str_attrib_int_base", "0")
SetVariable ("str_attrib_wis_total", "0")
SetVariable ("str_attrib_wis_base", "0")
SetVariable ("str_attrib_hr", "0")
SetVariable ("str_attrib_dex_total", "0")
SetVariable ("str_attrib_dex_base", "0")
SetVariable ("str_attrib_con_total", "0")
SetVariable ("str_attrib_con_base", "0")
SetVariable ("str_attrib_luck_total", "0")
SetVariable ("str_attrib_luck_base", "0")
SetVariable ("str_attrib_dr", "0")
SetVariable ("str_attrib_hp_total", "0")
SetVariable ("str_attrib_hp_base", "0")
SetVariable ("str_attrib_mn_total", "0")
SetVariable ("str_attrib_mn_base", "0")
SetVariable ("str_attrib_mv_total", "0")
SetVariable ("str_attrib_mv_base", "0")
SetVariable ("str_attrib_saves", "0")
SetVariable ("str_attrib_report", "")

SetVariable ("st_wealth_gold", "0")
SetVariable ("st_wealth_hand", "0")
SetVariable ("st_wealth_qps", "0")
SetVariable ("st_wealth_hps", "0")
SetVariable ("st_wealth_mana", "0")
SetVariable ("st_wealth_moves", "0")
SetVariable ("st_wealth_prac", "0")
SetVariable ("st_wealth_train", "0")
SetVariable ("st_wealth_triviasession", "0")

SetVariable ("attackgroup_mob", "")
SetVariable ("st_hunt_mob", "")
SetVariable ("st_hunt_dir", "")

SetVariable ("strack_parse", "")
SetVariable ("strack_masteries", "")

EnableGroup ("st_hunt_action", false)
EnableGroup ("strack_player", true)
EnableGroup ("strack_equip_active", false)
EnableGroup ("strack_wealth_active", false)
EnableGroup ("strack_masteries_active", false)
EnableGroup ("strack_pups_active", false)
EnableGroup ("strack_command", true)

SendNoEcho("Level")
SendNoEcho("Finger")

Execute("strack_reset_quest")
SendNoEcho("dtrack reset")
SendNoEcho("gq c")

SendNoEcho("echo @x166*@x172*@x178*@x184*@x119*@x226*@x220*@x208Sharptracker " .. (GetVariable "st_main_version") .. " by Huitzil Opochtli: http://ptaramai2013.blogspot.co.nz/")

Execute("st_function")
Execute("strack_display")</send>
  </alias>
  <alias
   match="st_summary"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_session"), os.time ()))

time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs((time_duration/3600)-(time_dd*24))))
time_mm = (math.floor(math.abs((time_duration/60)-(time_dd*1440)-(time_hh*60))))
time_mmfull = (math.floor(math.abs((time_duration/60))))
time_ss = time_duration-(time_mmfull*60)

time_result = (GetVariable "st_send_colour_effect")
time_result = time_result .. "("

if time_duration &gt; (60*60*24) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_dd
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "days "
end

if time_duration &gt; (60*60) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_hh
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "hrs "
end

if time_duration &gt; 60 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "mins "
end
  
if time_duration &gt; 0 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "secs"
end

time_result = time_result .. (GetVariable "st_send_colour_effect")
time_result = time_result .. ")"

if (GetVariable "st_counter_mobkillsession") &gt; "" then
  tempstorage = " :summary "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "After"
  tempstorage = tempstorage .. time_result .. " "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Mobs"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_mobkillsession")
  if time_mmfull &gt; 1 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (math.ceil(((GetVariable "st_counter_mobkillsession")/time_mmfull)*100)/100)
    tempstorage = tempstorage .. "min"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

-- here

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Exp"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_mobexpsession")
  if time_mmfull &gt; 1 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (math.ceil(((GetVariable "st_counter_mobexpsession")/time_mmfull)*100)/100)
    tempstorage = tempstorage .. "min"
  end
  if (GetVariable "st_counter_mobkillsession") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    xy = (GetVariable "st_counter_mobexpsession")/(GetVariable "st_counter_mobkillsession")
    xy = (math.ceil(xy*100)/100)
    tempstorage = tempstorage .. xy .. "mob"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Gold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_mobgoldsession")

  if time_mmfull &gt; 1 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (math.ceil(((GetVariable "st_counter_mobgoldsession")/time_mmfull)*100)/100)
    tempstorage = tempstorage .. "min"
  end
  if (GetVariable "st_counter_mobkillsession") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    xy = (GetVariable "st_counter_mobgoldsession")/(GetVariable "st_counter_mobkillsession")
    xy = (math.ceil(xy*100)/100)
    tempstorage = tempstorage .. xy .. "mob"
  end

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

-- if (GetVariable "st_counter_quest") &gt; "0" then
if ((GetVariable "st_counter_quest") + (GetVariable "st_counter_globalsession")) &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Quests"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_quest")
  if (GetVariable "st_counter_globalsession") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. " +" .. (GetVariable "st_counter_globalsession")
    tempstorage = tempstorage .. "glob"
  end

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "st_quest_reward_qpointtotal")
  tempstorage = tempstorage .. "qps"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
      xy = (GetVariable "st_quest_reward_qpointtotal")/((GetVariable "st_counter_quest") + (GetVariable "st_counter_globalsession"))
      xy = (math.ceil(xy*100)/100)
      tempstorage = tempstorage .. xy .. "ave"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_counter_pupsession") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Pups"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_pupsession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "st_counter_puptrainssession")
  tempstorage = tempstorage .. "trains"
  if (GetVariable "st_counter_pupstatssession") &gt; "0" then
    tempstorage = tempstorage .. " "
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_pupstatssession")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "stats"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_counter_levelsession") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Levels"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_levelsession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_counter_triviasession") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Trivia"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_triviasession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

--[[
if (GetVariable "st_counter_double") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Doubles"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_double")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end
--]]

if ((GetVariable "st_skills_improved") + (GetVariable "st_skills_mastered")) &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Skills/Spells"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  if (GetVariable "st_skills_improved") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. commas (GetVariable "st_skills_improved")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "impr"
  end
  if (GetVariable "st_skills_improved") &gt; "0" then
    if (GetVariable "st_skills_mastered") &gt; "0" then
      tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
      tempstorage = tempstorage .. ":"
    end
  end
  if (GetVariable "st_skills_mastered") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_skills_mastered")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "mast"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

--[[
if (GetVariable "st_counter_skin") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Skins"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_skin")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_counter_trophy") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Trophies"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_trophy")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end
--]]

if (GetVariable "st_skills_stealth") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Stealth"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_stealth")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_skills_envenomsession") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Envenom"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_envenomsession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_skills_assassin") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Assassinated"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_assassin")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_skills_quickbs") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "QuickBS"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_quickbs")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_skills_fence") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Fence"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_fence")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_fencegoldsession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "gold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_skills_entrap") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Entrap"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_entrap")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

tempsummary = tempstorage
if time_mmfull &gt; 1 then
  if (GetVariable "st_send_all") == "1" then
    Execute("st_attack echo")
    if (GetVariable "st_last_weapons") ~= "empty" then
      tempsummary = tempsummary .. (GetVariable "st_send_colour_hilight")
      tempsummary = tempsummary .. "Attacks: " .. (GetVariable "st_last_weapons")
    end
    Execute("st_dodge echo")
    if (GetVariable "st_last_dodge") ~= "empty" then
      tempsummary = tempsummary .. (GetVariable "st_send_colour_hilight")
      tempsummary = tempsummary .. "Dodges: " .. (GetVariable "st_last_dodge")
    end
    Execute("st_poison echo")
    if (GetVariable "st_last_poison") ~= "empty" then
      tempsummary = tempsummary .. (GetVariable "st_send_colour_hilight")
      tempsummary = tempsummary .. "Poisons: " .. (GetVariable "st_last_poison")
    end
    SendNoEcho((GetVariable "st_send_results") .. tempsummary)
  end
  else
    ColourNote ("black", "white", " Summary ", "white", "black", " Nothing to report.")
  end
end</send>
  </alias>
  <alias
   match="st_summary *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_session"), os.time ()))

time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs((time_duration/3600)-(time_dd*24))))
time_mm = (math.floor(math.abs((time_duration/60)-(time_dd*1440)-(time_hh*60))))
time_mmfull = (math.floor(math.abs((time_duration/60))))
time_ss = time_duration-(time_mmfull*60)

time_result = (GetVariable "st_send_colour_effect")
time_result = time_result .. "("

if time_duration &gt; (60*60*24) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_dd
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "days "
end

if time_duration &gt; (60*60) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_hh
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "hrs "
end

if time_duration &gt; 60 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "mins "
end
  
if time_duration &gt; 0 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "secs"
end

time_result = time_result .. (GetVariable "st_send_colour_effect")
time_result = time_result .. ")"

if (GetVariable "st_counter_mobkillsession") &gt; "" then
  tempstorage = " :summary "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "After"
  tempstorage = tempstorage .. time_result .. " "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Mobs"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_mobkillsession")
  if time_mmfull &gt; 1 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (math.ceil(((GetVariable "st_counter_mobkillsession")/time_mmfull)*100)/100)
    tempstorage = tempstorage .. "min"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

-- here

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Exp"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_mobexpsession")
  if time_mmfull &gt; 1 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (math.ceil(((GetVariable "st_counter_mobexpsession")/time_mmfull)*100)/100)
    tempstorage = tempstorage .. "min"
  end
  if (GetVariable "st_counter_mobkillsession") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    xy = (GetVariable "st_counter_mobexpsession")/(GetVariable "st_counter_mobkillsession")
    xy = (math.ceil(xy*100)/100)
    tempstorage = tempstorage .. xy .. "mob"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Gold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_mobgoldsession")

  if time_mmfull &gt; 1 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (math.ceil(((GetVariable "st_counter_mobgoldsession")/time_mmfull)*100)/100)
    tempstorage = tempstorage .. "min"
  end
  if (GetVariable "st_counter_mobkillsession") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    xy = (GetVariable "st_counter_mobgoldsession")/(GetVariable "st_counter_mobkillsession")
    xy = (math.ceil(xy*100)/100)
    tempstorage = tempstorage .. xy .. "mob"
  end

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

-- if (GetVariable "st_counter_quest") &gt; "0" then
if ((GetVariable "st_counter_quest") + (GetVariable "st_counter_globalsession")) &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Quests"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_quest")
  if (GetVariable "st_counter_globalsession") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. " +" .. (GetVariable "st_counter_globalsession")
    tempstorage = tempstorage .. "glob"
  end

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "st_quest_reward_qpointtotal")
  tempstorage = tempstorage .. "qps"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
      xy = (GetVariable "st_quest_reward_qpointtotal")/((GetVariable "st_counter_quest") + (GetVariable "st_counter_globalsession"))
      xy = (math.ceil(xy*100)/100)
      tempstorage = tempstorage .. xy .. "ave"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_counter_pupsession") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Pups"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_pupsession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "st_counter_puptrainssession")
  tempstorage = tempstorage .. "trains"

  if (GetVariable "st_counter_pupstatssession") &gt; "0" then
    tempstorage = tempstorage .. " "
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_pupstatssession")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "stats"
  end

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_counter_levelsession") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Levels"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_levelsession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_counter_triviasession") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Trivia"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_triviasession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

--[[
if (GetVariable "st_counter_double") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Doubles"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_double")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end
--]]

if ((GetVariable "st_skills_improved") + (GetVariable "st_skills_mastered")) &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Skills/Spells"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  if (GetVariable "st_skills_improved") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. commas (GetVariable "st_skills_improved")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "impr"
  end
  if (GetVariable "st_skills_improved") &gt; "0" then
    if (GetVariable "st_skills_mastered") &gt; "0" then
      tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
      tempstorage = tempstorage .. ":"
    end
  end
  if (GetVariable "st_skills_mastered") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_skills_mastered")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "mast"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

--[[
if (GetVariable "st_counter_skin") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Skins"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_skin")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_counter_trophy") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Trophies"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_trophy")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end
--]]

if (GetVariable "st_skills_stealth") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Stealth"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_stealth")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_skills_envenomsession") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Envenom"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_envenomsession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_skills_assassin") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Assassinated"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_assassin")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_skills_quickbs") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "QuickBS"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_quickbs")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_skills_fence") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Fence"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_fence")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_fencegoldsession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "gold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if (GetVariable "st_skills_entrap") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Entrap"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_entrap")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

tempsummary = tempstorage
if time_mmfull &gt; 1 then
  if (GetVariable "st_send_all") == "1" then
    Execute("st_attack echo")
    if (GetVariable "st_last_weapons") ~= "empty" then
      tempsummary = tempsummary .. (GetVariable "st_send_colour_hilight")
      tempsummary = tempsummary .. "Weap: " .. (GetVariable "st_last_weapons")
    end
    Execute("st_dodge echo")
    if (GetVariable "st_last_dodge") ~= "empty" then
      tempsummary = tempsummary .. (GetVariable "st_send_colour_hilight")
      tempsummary = tempsummary .. "Dodg: " .. (GetVariable "st_last_dodge")
    end
    Execute("st_poison echo")
    if (GetVariable "st_last_poison") ~= "empty" then
      tempsummary = tempsummary .. (GetVariable "st_send_colour_hilight")
      tempsummary = tempsummary .. "Pois: " .. (GetVariable "st_last_poison")
    end
    SendNoEcho("%1 " .. tempsummary)
  end
else
  ColourNote ("black", "white", " Summary ", "white", "black", " Nothing to report.")
end

end</send>
  </alias>
  <alias
   match="st_toggles"
   enabled="y"
   group="strack_reset"
   send_to="12"
   sequence="100"
  >
  <send>ColourNote ("white", "black", " ")

if GetVariable("st_toggle_vorpal_report") == "1" then
  ColourNote ("white", "black", "Report Vorpals (togvorpal) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Report Vorpals (togvorpal) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_deathblow_report") == "1" then
  ColourNote ("white", "black", "Report Deathblows (togdeathblow) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Report Deathblows (togdeathblows) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_trivia_report") == "1" then
  ColourNote ("white", "black", "Report Trivia Mobs (togtrivia) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Report Trivia Mobs (togtrivia) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_skills_improved") == "1" then
  ColourNote ("white", "black", "Report Skill/Spell Improvements (togimprove) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Report Skill/Spell Improvements (togimprove) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_skills_mastered") == "1" then
  ColourNote ("white", "black", "Report Skill/Spell Mastered (togmaster) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Report Skill/Spell Mastered (togmaster) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_double") == "1" then
  ColourNote ("white", "black", "Report Double Stats (togdouble) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Report Double Stats (togdouble) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_hour") == "1" then
  ColourNote ("white", "black", "Report Hour Stats (toghour) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Report Hour Stats (toghour) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_pup") == "1" then
  ColourNote ("white", "black", "Report Pupping Stats (togpup) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Report Pupping Stats (togpup) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_level") == "1" then
  ColourNote ("white", "black", "Report Levelling Stats (toglevel) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Report Levelling Stats (toglevel) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_look") == "1" then
  ColourNote ("white", "black", "Execute LOOK on a Mobkill (toglook) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Execute LOOK on a Mobkill (toglook) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_map") == "1" then
  ColourNote ("white", "black", "Execute MAP on a Mobkill (togmap) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Execute MAP on a Mobkill (togmap) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_timerkill") == "1" then
  ColourNote ("white", "black", "Report Time Between Kills (togkill) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Report Time Between Kills (togkill) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_tax") == "1" then
  ColourNote ("white", "black", "Report Clan Tax (togtax) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Report Clan Tax (togtax) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_quest_report") == "1" then
  ColourNote ("white", "black", "Report Questing Information (togquest) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Report Questing Information (togquest) ", "white", "black", " OFF ")
end

if GetVariable("st_toggle_exit") == "1" then
  ColourNote ("white", "black", "Execute EXIT on a Mobkill (togexit) ", "black", "white", " ON ")
else
  ColourNote ("white", "black", "Execute EXIT on a Mobkill (togexit) ", "white", "black", " OFF ")
end

tempstorage = (GetVariable "st_send_colour_norm")
tempstorage = tempstorage .. "normal text - "

tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
tempstorage = tempstorage .. "HIGHLIGHTED TEXT - "

tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
tempstorage = tempstorage .. "(Brackets)"

SendNoEcho("echo " .. tempstorage)
ColourNote ("white", "black", " ")
</send>
  </alias>
  <alias
   match="st_totals"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_total"), os.time ()))

time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs((time_duration/3600)-(time_dd*24))))
time_mm = (math.floor(math.abs((time_duration/60)-(time_dd*1440)-(time_hh*60))))
time_mmfull = (math.floor(math.abs((time_duration/60))))
time_ss = time_duration-(time_mmfull*60)

time_result = (GetVariable "st_send_colour_effect")
time_result = time_result .. "("

if time_duration &gt; (60*60*24) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_dd
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "days "
end

if time_duration &gt; (60*60) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_hh
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "hrs "
end

if time_duration &gt; 60 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "mins "
end
  
if time_duration &gt; 0 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "secs"
end

if time_dd &lt; 1 then
  time_dd = 1
end

time_result = time_result .. (GetVariable "st_send_colour_effect")
time_result = time_result .. ")"

if tonumber(GetVariable "st_counter_mobkillsession") &gt; 0 then
  tempstorage = " :" .. (GetVariable "st_main_version") .. " totals "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "After"
  tempstorage = tempstorage .. time_result .. " "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Mobs"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_mobkilltotal")
  if time_result &gt; "" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (math.ceil(math.ceil(((GetVariable "st_counter_mobkilltotal")/time_dd)*100)/100))
    tempstorage = tempstorage .. " day"
  end

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Exp"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_mobexptotal")
  if (GetVariable "st_counter_mobkilltotal") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (math.ceil(math.ceil(math.ceil(((GetVariable "st_counter_mobexptotal")/time_dd)*100)/100)/1000))
    tempstorage = tempstorage .. "k day"
  end

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Gold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_mobgoldtotal")
  if (GetVariable "st_counter_mobkilltotal") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. commas (math.ceil(math.ceil(math.ceil(((GetVariable "st_counter_mobgoldtotal")/time_dd)*100)/100)/1000))
    tempstorage = tempstorage .. "k day"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"

--  if (GetVariable "st_counter_questtotalall") &gt; "0" then
if ((GetVariable "st_counter_questtotalall") + (GetVariable "st_counter_globaltotal")) &gt; 0 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. " Quests"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_questtotalall")
    if (GetVariable "st_counter_globaltotal") &gt; "0" then
      tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
      tempstorage = tempstorage .. " +" .. (GetVariable "st_counter_globaltotal")
      tempstorage = tempstorage .. "glob"
    end

    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. commas (GetVariable "st_quest_reward_qpointtotalall")
    tempstorage = tempstorage .. "qps"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
      xy = (GetVariable "st_quest_reward_qpointtotalall")/((GetVariable "st_counter_questtotalall") + (GetVariable "st_counter_globaltotal"))
      xy = (math.ceil(xy*100)/100)
      tempstorage = tempstorage .. xy .. "ave"

    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (math.ceil(math.ceil(math.ceil(((GetVariable "st_quest_reward_qpointtotalall")/time_dd)*100)/100)))
    tempstorage = tempstorage .. " day"

    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ")"
  end

  if (GetVariable "st_counter_puptotal") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. " Pups"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_puptotal")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (GetVariable "st_counter_puptrainstotal")
    tempstorage = tempstorage .. "trains"

  if (GetVariable "st_counter_pupstatstotal") &gt; "0" then
    tempstorage = tempstorage .. " "
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_pupstatstotal")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "stats"
  end

    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ")"
  end

if tonumber(GetVariable "st_counter_leveltotal") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Levels"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_leveltotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if ((GetVariable "st_counter_improvedtotal") + (GetVariable "st_counter_masteredtotal")) &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Skills/Spells"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  if (GetVariable "st_counter_improvedtotal") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. commas (GetVariable "st_counter_improvedtotal")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "impr"
  end
  if (GetVariable "st_counter_improvedtotal") &gt; "0" then
    if (GetVariable "st_counter_masteredtotal") &gt; "0" then
      tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
      tempstorage = tempstorage .. ":"
    end
  end
  if (GetVariable "st_counter_masteredtotal") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_masteredtotal")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "mast"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_counter_doublestotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Doubles"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_doublestotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if ((GetVariable "st_counter_trivia") + (GetVariable "st_counter_triviamob") + (GetVariable "st_counter_triviabless")) &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Trivia"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  if (GetVariable "st_counter_trivia") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_trivia")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "quests"
  end
  if (GetVariable "st_counter_trivia") &gt; "0" then
    if (GetVariable "st_counter_triviamob") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    end
  end
  if (GetVariable "st_counter_triviamob") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_triviamob")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "mobkills"
  end
  if (GetVariable "st_counter_triviabless") &gt; "0" then
    if (GetVariable "st_counter_trivia") &gt; "0" then
      tempstorage = tempstorage .. ":"
      tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
      tempstorage = tempstorage .. (GetVariable "st_counter_triviabless")
      tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
      tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
      tempstorage = tempstorage .. "blessing"
    elseif (GetVariable "st_counter_triviamob") &gt; "0" then
      tempstorage = tempstorage .. ":"
      tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
      tempstorage = tempstorage .. (GetVariable "st_counter_triviabless")
      tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
      tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
      tempstorage = tempstorage .. "blessing"
    else
      tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
      tempstorage = tempstorage .. (GetVariable "st_counter_triviabless")
      tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
      tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
      tempstorage = tempstorage .. "blessing"
    end
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_counter_vorpalstotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Vorpals"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_vorpalstotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_deathblowtotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Deathblows"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_deathblowtotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_counter_skintotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Skins"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_skintotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_counter_trophytotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Trophies"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_trophytotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_suppresstotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Suppress"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_suppresstotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_stealthtotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Stealth"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_stealthtotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_envenomtotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Envenom"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_envenomtotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_assassintotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Assassinated"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_assassintotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_quickbstotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " QuickBS"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_quickbstotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_fencetotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Fence"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_fencetotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_fencegoldtotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "gold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_entraptotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Entrap"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_entraptotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_necrotictotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Necrotic"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_necrotictotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_balortotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Balor"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_balortotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")

if (GetVariable "st_send_all") == "1" then
  SendNoEcho((GetVariable "st_send_results") .. tempstorage)
end

else
  ColourNote ("black", "white", " Summary ", "white", "black", " Nothing to report.")
end
</send>
  </alias>
  <alias
   match="lastdouble"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>if (GetVariable "st_last_double") &gt; "" then
  SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_double"))
else
  Note("Nothing to report.")
end
</send>
  </alias>
  <alias
   match="st_totals *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_total"), os.time ()))

time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs((time_duration/3600)-(time_dd*24))))
time_mm = (math.floor(math.abs((time_duration/60)-(time_dd*1440)-(time_hh*60))))
time_mmfull = (math.floor(math.abs((time_duration/60))))
time_ss = time_duration-(time_mmfull*60)

time_result = (GetVariable "st_send_colour_effect")
time_result = time_result .. "("

if time_duration &gt; (60*60*24) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_dd
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "days "
end

if time_duration &gt; (60*60) then
--  if time_hh &gt; 0 then
    time_result = time_result .. (GetVariable "st_send_colour_hilight")
    time_result = time_result .. time_hh
    time_result = time_result .. (GetVariable "st_send_colour_norm")
    time_result = time_result .. "hrs "
--  end
end

if time_duration &gt; 60 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "mins "
end
  
if time_duration &gt; 0 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "secs"
end

if time_dd &lt; 1 then
  time_dd = 1
end

time_result = time_result .. (GetVariable "st_send_colour_effect")
time_result = time_result .. ")"

if tonumber(GetVariable "st_counter_mobkillsession") &gt; 0 then
  tempstorage = " :" .. (GetVariable "st_main_version") .. " totals "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "After"
  tempstorage = tempstorage .. time_result .. " "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Mobs"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_mobkilltotal")
  if time_result &gt; "" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (math.ceil(math.ceil(((GetVariable "st_counter_mobkilltotal")/time_dd)*100)/100))
    tempstorage = tempstorage .. " day"
  end

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Exp"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_mobexptotal")
  if (GetVariable "st_counter_mobkilltotal") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (math.ceil(math.ceil(math.ceil(((GetVariable "st_counter_mobexptotal")/time_dd)*100)/100)/1000))
    tempstorage = tempstorage .. "k day"
  end

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Gold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_mobgoldtotal")
  if (GetVariable "st_counter_mobkilltotal") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. commas (math.ceil(math.ceil(math.ceil(((GetVariable "st_counter_mobgoldtotal")/time_dd)*100)/100)/1000))
    tempstorage = tempstorage .. "k day"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"

--  if (GetVariable "st_counter_questtotalall") &gt; "0" then
if ((GetVariable "st_counter_questtotalall") + (GetVariable "st_counter_globaltotal")) &gt; 0 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. " Quests"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_questtotalall")
    if (GetVariable "st_counter_globaltotal") &gt; "0" then
      tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
      tempstorage = tempstorage .. " +" .. (GetVariable "st_counter_globaltotal")
      tempstorage = tempstorage .. "glob"
    end

    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. commas (GetVariable "st_quest_reward_qpointtotalall")
    tempstorage = tempstorage .. "qps"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
      xy = (GetVariable "st_quest_reward_qpointtotalall")/((GetVariable "st_counter_questtotalall") + (GetVariable "st_counter_globaltotal"))
      xy = (math.ceil(xy*100)/100)
      tempstorage = tempstorage .. xy .. "ave"

    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. (math.ceil(math.ceil(math.ceil(((GetVariable "st_quest_reward_qpointtotalall")/time_dd)*100)/100)))
    tempstorage = tempstorage .. " day"

    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ")"
  end

if (GetVariable "st_counter_doublestotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Doubles"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_doublestotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_counter_puptotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Pups"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_puptotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. (GetVariable "st_counter_puptrainstotal")
  tempstorage = tempstorage .. "trains"

  if (GetVariable "st_counter_pupstatstotal") &gt; "0" then
    tempstorage = tempstorage .. " "
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_pupstatstotal")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "stats"
  end

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if tonumber(GetVariable "st_counter_leveltotal") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Levels"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_leveltotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if ((GetVariable "st_counter_improvedtotal") + (GetVariable "st_counter_masteredtotal")) &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Skills/Spells"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  if (GetVariable "st_counter_improvedtotal") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. commas (GetVariable "st_counter_improvedtotal")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "impr"
  end
  if (GetVariable "st_counter_improvedtotal") &gt; "0" then
    if (GetVariable "st_counter_masteredtotal") &gt; "0" then
      tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
      tempstorage = tempstorage .. ":"
    end
  end
  if (GetVariable "st_counter_masteredtotal") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_masteredtotal")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "mast"
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if ((GetVariable "st_counter_trivia") + (GetVariable "st_counter_triviamob") + (GetVariable "st_counter_triviabless")) &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Trivia"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  if (GetVariable "st_counter_trivia") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_trivia")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "quests"
  end
  if (GetVariable "st_counter_trivia") &gt; "0" then
    if (GetVariable "st_counter_triviamob") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    end
  end
  if (GetVariable "st_counter_triviamob") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_triviamob")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "mobkills"
  end
  if (GetVariable "st_counter_triviabless") &gt; "0" then
    if (GetVariable "st_counter_trivia") &gt; "0" then
      tempstorage = tempstorage .. ":"
      tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
      tempstorage = tempstorage .. (GetVariable "st_counter_triviabless")
      tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
      tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
      tempstorage = tempstorage .. "blessing"
    elseif (GetVariable "st_counter_triviamob") &gt; "0" then
      tempstorage = tempstorage .. ":"
      tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
      tempstorage = tempstorage .. (GetVariable "st_counter_triviabless")
      tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
      tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
      tempstorage = tempstorage .. "blessing"
    else
      tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
      tempstorage = tempstorage .. (GetVariable "st_counter_triviabless")
      tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
      tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
      tempstorage = tempstorage .. "blessing"
    end
  end
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_counter_vorpalstotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Vorpals"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_vorpalstotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_deathblowtotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Deathblows"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_deathblowtotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_counter_skintotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Skins"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_skintotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_counter_trophytotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Trophies"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_trophytotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_stealthtotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Stealth"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_stealthtotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_suppresstotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Suppress"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_suppresstotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_envenomtotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Envenom"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_envenomtotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_assassintotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Assassinated"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_assassintotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_quickbstotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " QuickBS"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_quickbstotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_fencetotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Fence"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_fencetotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_counter_fencegoldtotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "gold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_entraptotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Entrap"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_entraptotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_necrotictotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Necrotic"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_necrotictotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

if (GetVariable "st_skills_balortotal") &gt; "0" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. " Balor"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_skills_balortotal")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"
end

tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")

if (GetVariable "st_send_all") == "1" then
  SendNoEcho("%1 " .. tempstorage)
end

else
  ColourNote ("black", "white", " Summary ", "white", "black", " Nothing to report.")
end</send>
  </alias>
  <alias
   match="lastdouble *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>if (GetVariable "st_last_double") &gt; "" then
  SendNoEcho("%1 " .. (GetVariable "st_last_double"))
else
  Note("Nothing to report.")
end</send>
  </alias>
  <alias
   match="st_wealth"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("strack_parse", "")
EnableGroup ("strack_wealth_active", true)
SendNoEcho ("acc")
SendNoEcho ("score")
</send>
  </alias>
  <alias
   match="lasthour"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>if (GetVariable "st_last_hour") &gt; "" then
  SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_hour"))
else
  Note("Nothing to report.")
end
</send>
  </alias>
  <alias
   match="st_wealth *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("strack_parse", "%1")
EnableGroup ("strack_wealth_active", true)
SendNoEcho ("acc")
SendNoEcho ("score")
</send>
  </alias>
  <alias
   match="lasthour *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>if (GetVariable "st_last_hour") &gt; "" then
  SendNoEcho("%1 " .. (GetVariable "st_last_hour"))
else
  Note("Nothing to report.")
end
</send>
  </alias>
  <alias
   match="lastlevel"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>if (GetVariable "st_last_level") &gt; "" then
  SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_level"))
else
  ColourNote ("black", "white", " Last Level ", "white", "black", " Nothing to report.")
end

Execute("strack_display")
</send>
  </alias>
  <alias
   match="togdouble"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_double = GetVariable("st_toggle_double")

if st_toggle_double == "0" then
  SetVariable ("st_toggle_double", 1)
  ColourNote ("white", "black", "Report Doubles Stats (togdouble) ", "black", "white", " ON ")
  SendNoEcho("double")
else
  SetVariable ("st_toggle_double", 0)
  ColourNote ("white", "black", "Report Doubles Stats (togdouble) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="togexit"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_exit = GetVariable("st_toggle_exit")

if st_toggle_exit == "0" then
  SetVariable ("st_toggle_exit", 1)
  ColourNote ("white", "black", "Execute Exit on a Mobkill (togexit) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_exit", 0)
  ColourNote ("white", "black", "Execute EXIT on a Mobkill (togexit) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="toghour"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_hour = GetVariable("st_toggle_hour")

if st_toggle_hour == "0" then
  SetVariable ("st_toggle_hour", 1)
  ColourNote ("white", "black", "Report Hourly Stats (toghour) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_hour", 0)
  ColourNote ("white", "black", "Report Hourly Stats (toghour) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="togimprove"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_skills_improved = GetVariable("st_toggle_skills_improved")

if st_toggle_skills_improved == "0" then
  SetVariable ("st_toggle_skills_improved", 1)
  ColourNote ("white", "black", "Report Skill/Spell Improvements (togimprove) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_skills_improved", 0)
  ColourNote ("white", "black", "Report Skill/Spell Improvements (togimprove) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="togkill"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_hour = GetVariable("st_toggle_timerkill")

if st_toggle_hour == "0" then
  SetVariable ("st_toggle_timerkill", 1)
  ColourNote ("white", "black", "Report Time Between Kills (togkill) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_timerkill", 0)
  ColourNote ("white", "black", "Report Time Between Kills (togkill) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="lastlevel *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>if (GetVariable "st_last_level") &gt; "" then
  SendNoEcho("%1 " .. (GetVariable "st_last_level"))
else
  ColourNote ("black", "white", " Last Level ", "white", "black", " Nothing to report.")
end

Execute("strack_display")
</send>
  </alias>
  <alias
   match="lastlevelauto"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup ("strack_level_skills", false)
tempstorage = (GetVariable "st_last_level")

if (GetVariable "st_level_skills") &gt; "" then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. " :"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight") .. " Extra"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm") .. (GetVariable "st_level_skills") .. "."
end

SetVariable ("st_last_level", tempstorage)

if (GetVariable "st_toggle_level") == "1" then
  if (GetVariable "st_last_level") &gt; "" then
    SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_level"))
  else
    ColourNote ("black", "white", " Last Level ", "white", "black", " Nothing to report.")
  end
end

Execute("strack_display")
</send>
  </alias>
  <alias
   match="lastpup"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>if (GetVariable "st_last_pup") &gt; "" then
  SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_pup"))
else
  ColourNote ("black", "white", " Last Level ", "white", "black", " Nothing to report.")
end

Execute("strack_display")
</send>
  </alias>
  <alias
   match="lastpup *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>if (GetVariable "st_last_pup") &gt; "" then
  SendNoEcho("%1 " .. (GetVariable "st_last_pup"))
else
  ColourNote ("black", "white", " Last Level ", "white", "black", " Nothing to report.")
end

Execute("strack_display")
</send>
  </alias>
  <alias
   match="strack_display"
   enabled="y"
   group="strack_display"
   send_to="12"
   sequence="100"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_session"), os.time ()))

time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs((time_duration/3600)-(time_dd*24))))
time_mm = (math.floor(math.abs((time_duration/60)-(time_dd*1440)-(time_hh*60))))
time_mmfull = (math.floor(math.abs((time_duration/60))))
time_ss = time_duration-(time_mmfull*60)

tempstorage = " "

tempstorage = tempstorage .. "Mobs("
tempstorage = tempstorage .. commas (GetVariable "st_counter_mobkillsession")
if time_mmfull &gt; 1 then
  tempstorage = tempstorage .. ":" .. (math.ceil(((GetVariable "st_counter_mobkillsession")/time_mmfull)*100)/100)
  tempstorage = tempstorage .. "min"
end
tempstorage = tempstorage .. ") "

tempstorage = tempstorage .. "Exp("
tempstorage = tempstorage .. commas (GetVariable "st_counter_mobexpsession")
if time_mmfull &gt; 1 then
  tempstorage = tempstorage .. ":" .. (math.ceil(((GetVariable "st_counter_mobexpsession")/time_mmfull)*100)/100)
  tempstorage = tempstorage .. "min"
  if (GetVariable "st_counter_mobkillsession") &gt; "0" then
    xy = (GetVariable "st_counter_mobexpsession")/(GetVariable "st_counter_mobkillsession")
    xy = (math.ceil(xy*100)/100)
    tempstorage = tempstorage .. " " .. xy .. "mob"
  end
end
tempstorage = tempstorage .. ") "

tempstorage = tempstorage .. "Gold("
tempstorage = tempstorage .. commas (GetVariable "st_counter_mobgoldsession")
if time_mmfull &gt; 1 then
  tempstorage = tempstorage .. ":" .. commas ((math.ceil(((GetVariable "st_counter_mobgoldsession")/time_mmfull)*100)/100))
  tempstorage = tempstorage .. "min"
  if (GetVariable "st_counter_mobkillsession") &gt; "0" then
  if (GetVariable "st_counter_mobgoldsession") &gt; "0" then
    xy = (GetVariable "st_counter_mobgoldsession")/(GetVariable "st_counter_mobkillsession")
    xy = commas ((math.ceil(xy*100)/100))
    tempstorage = tempstorage .. " " .. xy .. "mob"
  end
  end
end
tempstorage = tempstorage .. ") "

if ((GetVariable "st_counter_quest") + (GetVariable "st_counter_globalsession")) &gt; 0 then
  tempstorage = tempstorage .. "Quests("
  tempstorage = tempstorage .. (GetVariable "st_counter_quest")
  if (GetVariable "st_counter_globalsession") &gt; "0" then
    tempstorage = tempstorage .. " +" .. (GetVariable "st_counter_globalsession")
    tempstorage = tempstorage .. "globals"
  end

  tempstorage = tempstorage .. ":" .. (GetVariable "st_quest_reward_qpointtotal") .. "qps "
  if (GetVariable "st_quest_reward_qpointtotal") &gt; "0" then
    xy = (GetVariable "st_quest_reward_qpointtotal")/((GetVariable "st_counter_quest") + (GetVariable "st_counter_globalsession"))
    xy = (math.ceil(xy*100)/100)
    tempstorage = tempstorage .. xy .. "ave"
  end
  tempstorage = tempstorage .. ") "
end

--[
if (GetVariable "st_counter_gag") &gt; "0" then
  tempstorage = tempstorage .. "Gagged("
  tempstorage = tempstorage .. (GetVariable "st_counter_gag")
  tempstorage = tempstorage .. ") "
end
--]

if (GetVariable "st_toggle_display_double") == "1" then
  tempstorage = "[DBL" .. ((GetVariable "st_counter_double")+1) .. "] " .. tempstorage
end

if (GetVariable "skill_necrotic") == "0" then
  tempstorage = "[NECRO] " .. tempstorage
end

if (GetVariable "skill_balor") == "0" then
  tempstorage = "[BALOR] " .. tempstorage
end

if (GetVariable "skill_stealth") == "0" then
  tempstorage = "[STEALTH] " .. tempstorage
end

if (GetVariable "skill_suppress") == "0" then
  tempstorage = "[Suppress] " .. tempstorage
end

if (GetVariable "skill_entrap") == "0" then
  tempstorage = "[ENTRAP] " .. tempstorage
end

if (GetVariable "skill_assassin") == "0" then
  tempstorage = "[ASSASSIN] " .. tempstorage
end

if (GetVariable "skill_quickbs") == "0" then
  tempstorage = "[QUICKBS] " .. tempstorage
end

if (GetVariable "st_toggle_display_global") == "1" then
  tempstorage = "[GLOBAL] " .. tempstorage
end

if (GetVariable "st_toggle_display_quest") == "1" then
  tempstorage = "[QUEST] " .. tempstorage
end

tempstorage1 = (GetVariable "st_main_version") .. " " .. tempstorage
tempstorage2 = "[" .. string.upper (GetVariable "st_send_results") .. "] " .. tempstorage
InfoClear()
Info(tempstorage2)</send>
  </alias>
  <alias
   match="lastpupauto"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup ("strack_pups_active", false)

time_duration = math.abs(os.difftime ((GetVariable "st_time_pup"), os.time ()))
  time_hh = (math.floor(math.abs(time_duration/3600)))
  time_mm = (math.floor(math.abs(time_duration/60))-(time_hh*60))
  time_ss = time_duration-(time_hh*3600)
  time_ss = time_ss-(time_mm*60)
  time_result = time_mm .. "mins" .. time_ss .. "secs"

  time_result = (GetVariable "st_send_colour_hilight")
  time_result = time_result .. " Time Since Last Pup"
  time_result = time_result .. (GetVariable "st_send_colour_effect")
  time_result = time_result .. "("
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "min "
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "sec"
  time_result = time_result .. (GetVariable "st_send_colour_effect")
  time_result = time_result .. ")"

tempstorage = " :pup "
tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
tempstorage = tempstorage .. "#"
tempstorage = tempstorage .. (GetVariable "st_counter_pupsession")
tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
tempstorage = tempstorage .. " : "
tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
tempstorage = tempstorage .. "+"
tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
tempstorage = tempstorage .. (GetVariable "st_counter_puptrains")
tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
tempstorage = tempstorage .. "trains"

if (GetVariable "st_counter_pupskills") &gt; "1" then
  tempstorage = tempstorage .. " Extra " .. (GetVariable "st_counter_pupskills")
end

SetVariable ("st_last_pup", tempstorage)

if (GetVariable "st_toggle_pup") == "1" then
  if (GetVariable "st_last_pup") &gt; "" then
    SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_pup") .. time_result)
  end
end

SetVariable ("st_time_pup", os.time ())
Execute("strack_display")
</send>
  </alias>
  <alias
   match="toglevel"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_level = GetVariable("st_toggle_level")

if st_toggle_level == "0" then
  SetVariable ("st_toggle_level", 1)
  ColourNote ("white", "black", "Report Levelling Stats (toglevel) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_level", 0)
  ColourNote ("white", "black", "Report Levelling Stats (toglevel) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="toglook"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_look = GetVariable("st_toggle_look")

if st_toggle_look == "0" then
  SetVariable ("st_toggle_look", 1)
  ColourNote ("white", "black", "Execute LOOK on a Mobkill (toglook) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_look", 0)
  ColourNote ("white", "black", "Execute LOOK on a Mobkill (toglook) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="togmap"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_map = GetVariable("st_toggle_map")

if st_toggle_map == "0" then
  SetVariable ("st_toggle_map", 1)
  ColourNote ("white", "black", "Execute Map on a Mobkill (togmap) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_map", 0)
  ColourNote ("white", "black", "Execute Map on a Mobkill (togmap) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="togmaster"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_skills_mastered = GetVariable("st_toggle_skills_mastered")

if st_toggle_skills_mastered == "0" then
  SetVariable ("st_toggle_skills_mastered", 1)
  ColourNote ("white", "black", "Report Skill/Spell Mastered (togmaster) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_skills_mastered", 0)
  ColourNote ("white", "black", "Report Skill/Spell Mastered (togmaster) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="togpup"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_pup = GetVariable("st_toggle_pup")

if st_toggle_pup == "0" then
  SetVariable ("st_toggle_pup", 1)
  ColourNote ("white", "black", "Report Pupping Stats (togpup) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_pup", 0)
  ColourNote ("white", "black", "Report Pupping Stats (togpup) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="cmp *"
   enabled="y"
   group="strack_command"
   send_to="12"
   sequence="100"
  >
  <send>SendNoEcho("compare %1 all containers")</send>
  </alias>
  <alias
   match="strack_displayquest"
   enabled="y"
   group="strack_display"
   send_to="12"
   sequence="100"
  >
  <send>  tempstorage = (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Result"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")

  tempstorage = tempstorage .. (GetVariable "st_quest_reward_qpoint1")

  if (GetVariable "st_quest_reward_qpoint2") &gt; "0" then
    tempstorage = tempstorage .. " +" .. (GetVariable "st_quest_reward_qpoint2") .."luck"
  end

  if (GetVariable "st_quest_reward_qpoint3") &gt; "0" then
    tempstorage = tempstorage .. " +" .. (GetVariable "st_quest_reward_qpoint3") .."tier"
  end

  if (GetVariable "st_quest_reward_qpoint4") &gt; "0" then
    tempstorage = tempstorage .. " +" .. (GetVariable "st_quest_reward_qpoint4") .."mccp"
  end

  if (GetVariable "st_quest_reward_qpoint5") &gt; "0" then
    tempstorage = tempstorage .. " +" .. (GetVariable "st_quest_reward_qpoint5") .."daily"
  end

  if (GetVariable "st_quest_reward_qpoint6") &gt; "0" then
    tempstorage = tempstorage .. " +" .. (GetVariable "st_quest_reward_qpoint6") .."celeb"
  end

  tempstorage = tempstorage .. " ="
  tempstorage = tempstorage .. (GetVariable "st_quest_reward_qpoint1") + (GetVariable "st_quest_reward_qpoint2") + (GetVariable "st_quest_reward_qpoint3") + (GetVariable "st_quest_reward_qpoint4") + (GetVariable "st_quest_reward_qpoint5") + (GetVariable "st_quest_reward_qpoint6")
  tempstorage = tempstorage .. "qps"

  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "


  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "Gold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. commas (GetVariable "st_quest_reward_gold1")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  if (GetVariable "st_quest_reward_practice1") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "Practices"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_quest_reward_practice1")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ") "
  end

  if (GetVariable "st_quest_reward_practice2") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "Practices"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_quest_reward_practice2")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ") "
  end

  if (GetVariable "st_quest_reward_train1") == "1" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "Trains"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_quest_reward_train1")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ") "
  end

  if (GetVariable "st_quest_reward_trivia") == "1" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "Trivia"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_quest_reward_trivia")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ") "
  end

  SetVariable ("st_quest_result", tempstorage)
  SetVariable ("st_last_quest", (GetVariable "st_quest_task") .. (GetVariable "st_quest_result") .. (GetVariable "st_time_questduration"))
  if (GetVariable "st_send_all") == "1" then
    if (GetVariable "st_toggle_quest_report") == "1" then
      SendNoEcho((GetVariable "st_send_results") .. " :" .. (GetVariable "st_quest_result") .. (GetVariable "st_time_questduration"))
    end
  end

DoAfterSpecial (1, 'EnableGroup ("strack_quest_active", false)', 12)

SetBackgroundImage("background.bmp", 0)
InfoBackground ("white")
SetStatus("")
Execute("strack_display")
</send>
  </alias>
  <alias
   match="lastquest"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>if (GetVariable "st_last_quest") &gt; "" then
  SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_quest"))
else
  ColourNote ("black", "white", " Last Quest ", "white", "black", " Nothing to report.")
end
</send>
  </alias>
  <alias
   match="strack_reset_colours"
   enabled="y"
   group="strack_reset"
   send_to="12"
   sequence="100"
  >
  <send>if GetVariable("st_send_colour_norm") == "" then
  SetVariable ("st_send_colour_norm", "@x240")
end
if GetVariable("st_send_colour_hilight") == "" then
  SetVariable ("st_send_colour_hilight", "@x247")
end
if GetVariable("st_send_colour_effect") == "" then
  SetVariable ("st_send_colour_effect", "@x208")
end</send>
  </alias>
  <alias
   match="lastquest *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>if (GetVariable "st_last_quest") &gt; "" then
  SendNoEcho("%1 " .. (GetVariable "st_last_quest"))
else
  ColourNote ("black", "white", " Last Quest ", "white", "black", " Nothing to report.")
end
</send>
  </alias>
  <alias
   match="strack_reset_double"
   enabled="y"
   group="strack_reset"
   send_to="12"
   sequence="100"
  >
  <send>SendNoEcho("double")

DoAfterSpecial (2, 'Execute("st_toggles")', 12)
</send>
  </alias>
  <alias
   match="strack_reset_quest"
   enabled="y"
   group="strack_reset"
   send_to="12"
   sequence="100"
  >
  <send>SendNoEcho("quest info")

Execute("strack_reset_double")</send>
  </alias>
  <alias
   match="mycolours *"
   enabled="y"
   group="command"
   send_to="12"
   sequence="100"
  >
  <send>Execute("st_colours @x240 @x247 @%1")</send>
  </alias>
  <alias
   match="togquest"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_map = GetVariable("st_toggle_quest_report")

if st_toggle_map == "0" then
  SetVariable ("st_toggle_quest_report", 1)
  ColourNote ("white", "black", "Report Questing Information (togquest) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_quest_report", 0)
  ColourNote ("white", "black", "Report Questing Information (togquest) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="togtax"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_hour = GetVariable("st_toggle_tax")

if st_toggle_hour == "0" then
  SetVariable ("st_toggle_tax", 1)
  ColourNote ("white", "black", "Report Clan Tax (togtax) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_tax", 0)
  ColourNote ("white", "black", "Report Clan Tax (togtax) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="togtotals"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_display_total = GetVariable("st_toggle_display_total")

if st_toggle_display_total == "0" then
  SetVariable ("st_toggle_display_total", 1)
  Note("display totals: ON")
else
  SetVariable ("st_toggle_display_total", 0)
  Note("display totals: OFF")
end
SaveState ()

Execute("strack_display")</send>
  </alias>
  <alias
   match="togtrivia"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_trivia_report = GetVariable("st_toggle_trivia_report")

if st_toggle_trivia_report == "0" then
  SetVariable ("st_toggle_trivia_report", 1)
  ColourNote ("white", "black", "Report Trivia Mobs (togtrivia) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_trivia_report", 0)
  ColourNote ("white", "black", "Report Trivia Mobs (togtrivia) ", "white", "black", " OFF ")
end
SaveState ()
</send>
  </alias>
  <alias
   match="togvorpal"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_vorpal_report = GetVariable("st_toggle_vorpal_report")

if st_toggle_vorpal_report == "0" then
  SetVariable ("st_toggle_vorpal_report", 1)
  ColourNote ("white", "black", "Report Vorpals (togvorpal) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_vorpal_report", 0)
  ColourNote ("white", "black", "Report Vorpals (togvorpal) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="st_attack"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_session"), os.time ()))

time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs((time_duration/3600)-(time_dd*24))))
time_mm = (math.floor(math.abs((time_duration/60)-(time_dd*1440)-(time_hh*60))))
time_mmfull = (math.floor(math.abs((time_duration/60))))
time_ss = time_duration-(time_mmfull*60)

time_result = (GetVariable "st_send_colour_effect")
time_result = time_result .. "("

if time_duration &gt; (60*60*24) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_dd
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "days "
end

if time_duration &gt; (60*60) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_hh
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "hrs "
end

if time_duration &gt; 60 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "mins "
end
  
if time_duration &gt; 0 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "secs"
end

time_result = time_result .. (GetVariable "st_send_colour_effect")
time_result = time_result .. ")"

--[[ weapons ]]
tempstorage = ""

if tonumber(GetVariable "weapon_damage_counter") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "counter attack"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "weapon_damage_counter")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "weapon_damage_venom") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "poison"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "weapon_damage_venom")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "weapon_damage_flaming") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "flaming"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "weapon_damage_flaming")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "weapon_damage_frost") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "frost"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "weapon_damage_frost")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "weapon_damage_shocking") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "shocking"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "weapon_damage_shocking")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "weapon_damage_vamperic") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "vamperic"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "weapon_damage_vamperic")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_counter_vorpalsession") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "vorpal"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_vorpalsession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

--[[ combine ]]

if tempstorage &gt; "" then
  SetVariable ("st_last_weapons", tempstorage)

  tempstorage = " :attacks "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "After"
  tempstorage = tempstorage .. time_result .. " "

  if tonumber(GetVariable "st_counter_mobkillsession") &gt; 0 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. "Mobs"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_mobkillsession")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ") "
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ": "
  end

  tempstorage = tempstorage .. (GetVariable "st_last_weapons")
  SendNoEcho((GetVariable "st_send_results") .. tempstorage)

else
--  ColourNote ("black", "white", " st_weapons ", "white", "black", " Nothing to report.")
  SetVariable ("st_last_weapons", "empty")
end
</send>
  </alias>
  <alias
   match="togdeathblow"
   enabled="y"
   group="strack_toggle"
   send_to="12"
   sequence="100"
  >
  <send>st_toggle_deathblow_report = GetVariable("st_toggle_deathblow_report")

if st_toggle_deathblow_report == "0" then
  SetVariable ("st_toggle_deathblow_report", 1)
  ColourNote ("white", "black", "Report Deathblows (togdeathblow) ", "black", "white", " ON ")
else
  SetVariable ("st_toggle_deathblow_report", 0)
  ColourNote ("white", "black", "Report Deathblows (togdeathblow) ", "white", "black", " OFF ")
end
SaveState ()</send>
  </alias>
  <alias
   match="st_attack *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_session"), os.time ()))

time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs((time_duration/3600)-(time_dd*24))))
time_mm = (math.floor(math.abs((time_duration/60)-(time_dd*1440)-(time_hh*60))))
time_mmfull = (math.floor(math.abs((time_duration/60))))
time_ss = time_duration-(time_mmfull*60)

time_result = (GetVariable "st_send_colour_effect")
time_result = time_result .. "("

if time_duration &gt; (60*60*24) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_dd
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "days "
end

if time_duration &gt; (60*60) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_hh
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "hrs "
end

if time_duration &gt; 60 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "mins "
end
  
if time_duration &gt; 0 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "secs"
end

time_result = time_result .. (GetVariable "st_send_colour_effect")
time_result = time_result .. ")"

--[[ weapons ]]
tempstorage = ""

if tonumber(GetVariable "weapon_damage_counter") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "count"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "weapon_damage_counter")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "weapon_damage_venom") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "pois"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "weapon_damage_venom")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "weapon_damage_flaming") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "flam"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "weapon_damage_flaming")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "weapon_damage_frost") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "frost"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "weapon_damage_frost")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "weapon_damage_shocking") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "shock"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "weapon_damage_shocking")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "weapon_damage_vamperic") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "vamp"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "weapon_damage_vamperic")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_counter_vorpalsession") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "vorp"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_vorpalsession")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

--[[ combine ]]

if tempstorage &gt; "" then
  SetVariable ("st_last_weapons", tempstorage)

  tempstorage = " :attacks "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "After"
  tempstorage = tempstorage .. time_result .. " "

  if tonumber(GetVariable "st_counter_mobkillsession") &gt; 0 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. "Mobs"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_mobkillsession")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ") "
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ": "
  end

  tempstorage = tempstorage .. (GetVariable "st_last_weapons")
  SendNoEcho("%1 " .. tempstorage)

else
--  ColourNote ("black", "white", " st_weapons ", "white", "black", " Nothing to report.")
  SetVariable ("st_last_weapons", "empty")
end
</send>
  </alias>
  <alias
   match="st_attrib"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup ("strack_attrib_active", true)
SendNoEcho ("level")
SendNoEcho ("Attrib")

DoAfterSpecial (1, 'Execute("st_attrib_delay")', 12)</send>
  </alias>
  <alias
   match="st_attrib *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("strack_parse", "%1")
EnableGroup ("strack_attrib_active", true)
SendNoEcho ("level")
SendNoEcho ("Attrib")

DoAfterSpecial (1, 'Execute("st_attrib_delay2")', 12)</send>
  </alias>
  <alias
   match="st_attrib_delay"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>if (GetVariable "str_attrib_report") &gt; "" then
  SendNoEcho((GetVariable "st_send_results") .. (GetVariable "str_attrib_report"))
else
  ColourNote ("black", "white", " st_ttrib ", "white", "black", " Nothing to report.")
end
</send>
  </alias>
  <alias
   match="st_attrib_delay2"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>if (GetVariable "str_attrib_report") &gt; "" then
  SendNoEcho((GetVariable "strack_parse") .. (GetVariable "str_attrib_report"))
else
  ColourNote ("black", "white", " st_attrib ", "white", "black", " Nothing to report.")
end
</send>
  </alias>
  <alias
   match="st_colours * * *"
   enabled="y"
   group="strack_command"
   send_to="12"
   sequence="101"
  >
  <send>SetVariable ("st_send_colour_norm", "%1")
SetVariable ("st_send_colour_hilight", "%2")
SetVariable ("st_send_colour_effect", "%3")

tempstorage = (GetVariable "st_send_colour_norm")
tempstorage = tempstorage .. "normal text - "

tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
tempstorage = tempstorage .. "HIGHLIGHTED TEXT - "

tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
tempstorage = tempstorage .. "(Brackets)"

SendNoEcho("echo " .. tempstorage)
SaveState ()</send>
  </alias>
  <alias
   match="sps"
   enabled="y"
   group="strack_command"
   send_to="12"
   sequence="100"
  >
  <send>SendNoEcho("spellup INT")
SendNoEcho("spellup WIS")
SendNoEcho("Spellup")
SendNoEcho("Stats")</send>
  </alias>
  <alias
   match="st_back"
   enabled="y"
   group="strack_command"
   send_to="12"
   sequence="100"
  >
  <send>SetBackgroundImage("background.bmp", 5)
</send>
  </alias>
  <alias
   match="st_back *"
   enabled="y"
   group="strack_command"
   send_to="12"
   sequence="100"
  >
  <send>if "%1" .. ".bmp" then
  SetBackgroundImage("%1" .. ".bmp", 0)
else
  SetBackgroundImage("background.bmp", 0)
end
</send>
  </alias>
  <alias
   match="st_dodge"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_session"), os.time ()))

time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs((time_duration/3600)-(time_dd*24))))
time_mm = (math.floor(math.abs((time_duration/60)-(time_dd*1440)-(time_hh*60))))
time_mmfull = (math.floor(math.abs((time_duration/60))))
time_ss = time_duration-(time_mmfull*60)

time_result = (GetVariable "st_send_colour_effect")
time_result = time_result .. "("

if time_duration &gt; (60*60*24) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_dd
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "days "
end

if time_duration &gt; (60*60) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_hh
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "hrs "
end

if time_duration &gt; 60 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "mins "
end
  
if time_duration &gt; 0 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "secs"
end

time_result = time_result .. (GetVariable "st_send_colour_effect")
time_result = time_result .. ")"

--[[ dodges ]]
tempstorage = ""

if tonumber(GetVariable "st_dodges_dodge") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "dodge"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_dodge")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_luck") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "luck"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_luck")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_misdirect") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "misdirect"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_misdirect")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_blend") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "camouflage"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_blend")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_blink") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "blink"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_blink")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_divine") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "divine"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_divine")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_parry") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "parry"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_parry")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_rift") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "rift"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_rift")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_time") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "time shift"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_time")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

--[[ combine ]]

if tempstorage &gt; "" then
  SetVariable ("st_last_dodge", tempstorage)

  tempstorage = " :succesful dodges "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "After"
  tempstorage = tempstorage .. time_result .. " "

  if tonumber(GetVariable "st_counter_mobkillsession") &gt; 0 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. "Mobs"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_mobkillsession")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ") "
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ": "
  end

  tempstorage = tempstorage .. (GetVariable "st_last_dodge")
  SendNoEcho((GetVariable "st_send_results") .. tempstorage)

else
--  ColourNote ("black", "white", " st_dodge ", "white", "black", " Nothing to report.")
  SetVariable ("st_last_dodge", "empty")

end</send>
  </alias>
  <alias
   match="st_dodge *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>time_duration = math.abs(os.difftime ((GetVariable "st_time_session"), os.time ()))

time_dd = (math.floor(math.abs(time_duration/86400)))
time_hh = (math.floor(math.abs((time_duration/3600)-(time_dd*24))))
time_mm = (math.floor(math.abs((time_duration/60)-(time_dd*1440)-(time_hh*60))))
time_mmfull = (math.floor(math.abs((time_duration/60))))
time_ss = time_duration-(time_mmfull*60)

time_result = (GetVariable "st_send_colour_effect")
time_result = time_result .. "("

if time_duration &gt; (60*60*24) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_dd
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "days "
end

if time_duration &gt; (60*60) then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_hh
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "hrs "
end

if time_duration &gt; 60 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_mm
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "mins "
end
  
if time_duration &gt; 0 then
  time_result = time_result .. (GetVariable "st_send_colour_hilight")
  time_result = time_result .. time_ss
  time_result = time_result .. (GetVariable "st_send_colour_norm")
  time_result = time_result .. "secs"
end

time_result = time_result .. (GetVariable "st_send_colour_effect")
time_result = time_result .. ")"

--[[ dodges ]]
tempstorage = ""

if tonumber(GetVariable "st_dodges_dodge") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "dodge"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_dodge")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_luck") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "luck"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_luck")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_misdirect") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "misdir"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_misdirect")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_blend") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "camou"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_blend")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_blink") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "blink"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_blink")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_divine") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "div"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_divine")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_parry") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "parry"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_parry")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_rift") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "rift"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_rift")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

if tonumber(GetVariable "st_dodges_time") &gt; 0 then
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. "time"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_dodges_time")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "
end

--[[ combine ]]

if tempstorage &gt; "" then
  SetVariable ("st_last_dodge", tempstorage)

  tempstorage = " :succesful dodges "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "After"
  tempstorage = tempstorage .. time_result .. " "

  if tonumber(GetVariable "st_counter_mobkillsession") &gt; 0 then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. "Mobs"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_mobkillsession")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ") "
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ": "
  end

  tempstorage = tempstorage .. (GetVariable "st_last_dodge")
  SendNoEcho("%1 " .. tempstorage)

else
--  ColourNote ("black", "white", " st_dodge ", "white", "black", " Nothing to report.")
  SetVariable ("st_last_dodge", "empty")

end</send>
  </alias>
  <alias
   match="st_equip"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("strack_parse", "")
EnableGroup ("strack_equip_active", true)
SendNoEcho ("stats")
</send>
  </alias>
  <alias
   match="sps *"
   enabled="y"
   group="strack_command"
   send_to="12"
   sequence="100"
  >
  <send>Send("spellup %1")
Note("Spellup to %1 Complete.")</send>
  </alias>
  <alias
   match="st_equip *"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("strack_parse", "%1")
EnableGroup ("strack_equip_active", true)
SendNoEcho ("stats")
</send>
  </alias>
  <alias
   match="st_function"
   enabled="y"
   group="strack_reset"
   send_to="12"
   sequence="100"
  >
  <send>-- Commas in numbers - http://www.gammon.com.au/forum/?id=7805 - Nick Gammon
function commas (num)
  assert (type (num) == "number" or
          type (num) == "string")
  
  local result = ""

  -- split number into 3 parts, eg. -1234.545e22
  -- sign = + or -
  -- before = 1234
  -- after = .545e22

  local sign, before, after =
    string.match (tostring (num), "^([%+%-]?)(%d*)(%.?.*)$")

  -- pull out batches of 3 digits from the end, put a comma before them

  while string.len (before) &gt; 3 do
    result = "," .. string.sub (before, -3, -1) .. result
    before = string.sub (before, 1, -4)  -- remove last 3 digits
  end -- while

  -- we want the original sign, any left-over digits, the comma part,
  -- and the stuff after the decimal point, if any
  return sign .. before .. result .. after

end -- function commas

</send>
  </alias>
  <alias
   match="st_help"
   enabled="y"
   group="strack_command"
   send_to="12"
   sequence="100"
  >
  <send>ColourNote("black", "Orange", "Sharptracker " .. GetVariable("st_main_version") .. " Commands                      ")
ColourNote("Orange", "black", " st_reset: clear everything start fresh")
ColourNote("Orange", "black", " st_session: reset session variables (similar to reconnecting to Aard")
ColourNote("Orange", "black", " st_colours: &lt;@normal&gt; &lt;@high&gt; &lt;@brackets&gt; - eg st_colours @D @W @M")
ColourNote("Orange", "black", " st_toggles: view/change status of display flags")
ColourNote("Orange", "black", "----------------------------------------------------------------------")
ColourNote("Orange", "black", " st_report &lt;where&gt;: sharptracker output eg st_report spouse, default is GT")
ColourNote("Orange", "black", " st_summary &lt;where&gt;: display current session data")
ColourNote("Orange", "black", " st_totals &lt;where&gt;: display all data since st_reset was activated")
ColourNote("Orange", "black", "----------------------------------------------------------------------")
ColourNote("Orange", "black", " st_attack &lt;where&gt;: display successful weapon damage")
ColourNote("Orange", "black", " st_poison &lt;where&gt;: display successful poison damage")
ColourNote("Orange", "black", " st_dodge &lt;where&gt;: disply successful dodges")
ColourNote("Orange", "black", "----------------------------------------------------------------------")
ColourNote("Orange", "black", " st_wealth &lt;where&gt;")
ColourNote("Orange", "black", " st_attrib &lt;where&gt;: eg st_attrib spouse I need more hit points")
ColourNote("Orange", "black", " st_masteries &lt;where&gt;")
ColourNote("Orange", "black", " st_equip &lt;where&gt;")
ColourNote("Orange", "black", "----------------------------------------------------------------------")
ColourNote("Orange", "black", " lastquest &lt;where&gt;: eg lastquest ft questors being generous today")
ColourNote("Orange", "black", " lastdouble &lt;where&gt;")
ColourNote("Orange", "black", " lasthour &lt;where&gt;")
ColourNote("Orange", "black", " lastlevel &lt;where&gt;")
ColourNote("Orange", "black", "----------------------------------------------------------------------")
ColourNote("Orange", "black", " sps &lt;mob or player&gt;: eg sps on its own casts spellups on yourself")
ColourNote("Orange", "black", " cmp &lt;item&gt;: compare item in your inventory eg cmp sword")
ColourNote("Orange", "black", "----------------------------------------------------------------------")
</send>
  </alias>
  <alias
   match="st_initiate"
   enabled="y"
   group="strack_reset"
   send_to="12"
   sequence="100"
  >
  <send>EnableGroup ("strack_player", true)
SendNoEcho("finger")

if GetVariable("st_time_total") == "" then
  SetVariable ("st_time_total", os.time ())
end
if GetVariable("st_send_results") == "" then
  SetVariable ("st_send_results", "GTELL")
end
if GetVariable("st_counter_mobkilltotal") == "" then
  SetVariable ("st_counter_mobkilltotal", "0")
end
if GetVariable("st_counter_mobexptotal") == "" then
  SetVariable ("st_counter_mobexptotal", "0")
end
if GetVariable("st_counter_mobgoldtotal") == "" then
  SetVariable ("st_counter_mobgoldtotal", "0")
end
if GetVariable("st_counter_questtotal") == "" then
  SetVariable ("st_counter_questtotal", "0")
end
if GetVariable("st_counter_questtotalall") == "" then
  SetVariable ("st_counter_questtotalall", "0")
end
if GetVariable("st_quest_reward_qpointtotalall") == "" then
  SetVariable ("st_quest_reward_qpointtotalall", "0")
end

if GetVariable("st_counter_globalmobtotal") == "" then
  SetVariable ("st_counter_globalmobtotal", "0")
end
if GetVariable("st_counter_globaltotal") == "" then
  SetVariable ("st_counter_globaltotal", "0")
end

if GetVariable("st_counter_vorpalstotal") == "" then
  SetVariable ("st_counter_vorpalstotal", "0")
end
if GetVariable("st_counter_trivia") == "" then
  SetVariable ("st_counter_trivia", "0")
end
if GetVariable("st_counter_triviamob") == "" then
  SetVariable ("st_counter_triviamob", "0")
end
if GetVariable("st_counter_skintotal") == "" then
  SetVariable ("st_counter_skintotal", "0")
end
if GetVariable("st_counter_trophytotal") == "" then
  SetVariable ("st_counter_trophytotal", "0")
end
if GetVariable("st_counter_improvedtotal") == "" then
  SetVariable ("st_counter_improvedtotal", "0")
end
if GetVariable("st_counter_masteredtotal") == "" then
  SetVariable ("st_counter_masteredtotal", "0")
end
if GetVariable("st_counter_leveltotal") == "" then
  SetVariable ("st_counter_leveltotal", "0")
end
if GetVariable("st_counter_puptotal") == "" then
  SetVariable ("st_counter_puptotal", "0")
end
if GetVariable("st_counter_puptrainstotal") == "" then
  SetVariable ("st_counter_puptrainstotal", "0")
end
if GetVariable("st_toggle_vorpal_report") == "" then
  SetVariable ("st_toggle_vorpal_report", "1")
end
if GetVariable("st_toggle_deathblow_report") == "" then
  SetVariable ("st_toggle_deathblow_report", "1")
end
if GetVariable("st_toggle_trivia_report") == "" then
  SetVariable ("st_toggle_trivia_report", "1")
end
if GetVariable("st_toggle_skills_improved") == "" then
  SetVariable ("st_toggle_skills_improved", "0")
end
if GetVariable("st_toggle_skills_mastered") == "" then
  SetVariable ("st_toggle_skills_mastered", "0")
end
if GetVariable("st_toggle_double") == "" then
  SetVariable ("st_toggle_double", "0")
end
if GetVariable("st_toggle_hour") == "" then
  SetVariable ("st_toggle_hour", "0")
end
if GetVariable("st_toggle_pup") == "" then
  SetVariable ("st_toggle_pup", "0")
end
if GetVariable("st_toggle_level") == "" then
  SetVariable ("st_toggle_level", "0")
end
if GetVariable("st_toggle_look") == "" then
  SetVariable ("st_toggle_look", "0")
end
if GetVariable("st_toggle_map") == "" then
  SetVariable ("st_toggle_map", "0")
end
if GetVariable("st_toggle_timerkill") == "" then
  SetVariable ("st_toggle_timerkill", "0")
end
if GetVariable("st_toggle_tax") == "" then
  SetVariable ("st_toggle_tax", "0")
end
if GetVariable("st_toggle_quest_report") == "" then
  SetVariable ("st_toggle_quest_report", "0")
end
if GetVariable("st_toggle_exit") == "" then
  SetVariable ("st_toggle_exit", "0")
end

SetVariable ("st_toggle_market", "0")
SetVariable ("st_toggle_display_total", "0")
SetVariable ("st_toggle_display_quest", "0")
SetVariable ("st_toggle_display_global", "0")
SetVariable ("st_toggle_display_double", "0")

ColourNote ("black", "white", " -Initial Setup- ")
ColourNote ("white", "black", " ")
Execute("strack_reset_colours")
Execute("st_session")</send>
  </alias>
  <alias
   match="st_masteries"
   enabled="y"
   group="strack_report"
   send_to="12"
   sequence="100"
  >
  <send>SetVariable ("strack_parse", "")
EnableGroup ("strack_masteries_active", true)
SetVariable ("strack_masteries", " :masteries ")
SendNoEcho("mastery totals")</send>
  </alias>
</aliases>

<!--  Timers  -->

<timers>
  <timer enabled="y" minute="1" second="0.00" offset_second="0.00"    send_to="12"
group="strack_minute" >
  <send>Execute("strack_display")</send>

  </timer>
  <timer enabled="y" hour="1" second="0.00" offset_second="0.00"    send_to="12"
group="strack_hour" >
  <send>if (GetVariable "st_counter_mobkillhour") &gt; "0" then

  time_duration = math.abs(os.difftime ((GetVariable "st_time_hour"), os.time ()))
  time_hh = (math.floor(math.abs(time_duration/3600)))
  time_mm = (math.floor(math.abs(time_duration/60))-(time_hh*60))
  time_ss = time_duration-(time_hh*3600)
  time_ss = time_ss-(time_mm*60)
  time_result = time_hh .."hr" .. time_mm .. "mins" .. time_ss .. "secs"

  tempstorage = " :hourly summary "
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ": "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Mobs"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_mobkillhour")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. math.ceil(((GetVariable "st_counter_mobkillhour")/((time_hh*60) + time_mm)*100))/100
  tempstorage = tempstorage .. "min"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Exp"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_mobexphour")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. math.ceil(((GetVariable "st_counter_mobexphour")/((time_hh*60) + time_mm)*100))/100
  tempstorage = tempstorage .. "min"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ") "

  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. "Gold"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. "("
  tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
  tempstorage = tempstorage .. (GetVariable "st_counter_mobgoldhour")
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ":"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
  tempstorage = tempstorage .. math.ceil(((GetVariable "st_counter_mobgoldhour")/((time_hh*60) + time_mm)*100))/100
  tempstorage = tempstorage .. "min"
  tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
  tempstorage = tempstorage .. ")"

  if (GetVariable "st_counter_puphour") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. " Pups"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_puphour")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ":"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_puptrainshour") .. "trains"

  if (GetVariable "st_counter_pupstatshour") &gt; "0" then
    tempstorage = tempstorage .. " "
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_pupstatshour")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_norm")
    tempstorage = tempstorage .. "stats"
  end

    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ")"
  end

  if (GetVariable "st_counter_levelhour") &gt; "0" then
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. " Levels"
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. "("
    tempstorage = tempstorage .. (GetVariable "st_send_colour_hilight")
    tempstorage = tempstorage .. (GetVariable "st_counter_levelhour")
    tempstorage = tempstorage .. (GetVariable "st_send_colour_effect")
    tempstorage = tempstorage .. ")"
  end

  SetVariable ("st_last_hour", tempstorage)

  if (GetVariable "st_send_all") == "1" then
    if (GetVariable "st_toggle_hour") == 1 then
      SendNoEcho((GetVariable "st_send_results") .. (GetVariable "st_last_hour"))
    end
  end

  Execute("strack_display")

else
  Note("Nothing to report ....")

end

SetVariable ("st_time_hour", os.time ())
SetVariable ("st_counter_mobkillhour", "0")
SetVariable ("st_counter_mobexphour", "0")
SetVariable ("st_counter_mobgoldhour", "0")
SetVariable ("st_counter_puphour", "0")
SetVariable ("st_counter_levelhour", "0")</send>

  </timer>
</timers>

<!--  Plugin help  -->

<aliases>
  <alias
   script="OnHelp"
   match="Sharptracker:help"
   enabled="y"
  >
  </alias>
</aliases>

<script>
<![CDATA[
function OnHelp ()
  world.Note (world.GetPluginInfo (world.GetPluginID (), 3))
end

function POSCode(name, line, wildcards)
a = wildcards[1]
b = wildcards[2]
c = wildcards[3]
d = wildcards[4]

print("Debug Hadar: A:"..a.." B:"..b.." C:"..c.." D:"..d)

if b==nil or b=="" then
	b = 0
end

if c==nil or c=="" then 
	c = 0
end

if d==nil or d=="" then
	d = 0
end

xy = tonumber(a) + tonumber(b) + tonumber(c) + tonumber(d)

if xy then
  SetVariable ("st_counter_mobexptotal", (GetVariable "st_counter_mobexptotal") + xy)
  SetVariable ("st_counter_mobexpsession", (GetVariable "st_counter_mobexpsession") + xy)
  SetVariable ("st_counter_mobexphour", (GetVariable "st_counter_mobexphour") + xy)
  SetVariable ("st_counter_mobexpdouble", (GetVariable "st_counter_mobexpdouble") + xy)
end
end

]]>
</script> 

</muclient>
